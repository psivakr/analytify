(self.webpackChunkvexel=self.webpackChunkvexel||[]).push([[9232],{9329:function(Xn,Ot){!function(B){"use strict";var k=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])},me=function(e){var t={};return k(e,function(r){!function(e,t,r){"function"!=typeof r?Object.defineProperty(e,t,Object.assign({},r)):e[t]=r}(t,r,e[r])}),t},K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},Dt=["svg","path"],tt=function(e){return Dt.includes(e)},ne=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof t&&(r=t,t=null);var n=tt(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(tt(e)?K(n,"class",t):n.className=t),k(r,function(o,a){K(n,o,a)}),n},Ge=function(e){return function(t,r){typeof r<"u"&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)}},$=function(e,t){return function(r,n){return typeof n<"u"?t.splice(n,0,r):t.push(r),r}},Ie=function(e,t){return function(r){return t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r}},ie=typeof window<"u"&&typeof window.document<"u",De=function(){return ie},Qn="children"in(De()?ne("svg"):{})?function(i){return i.children.length}:function(i){return i.childNodes.length},sr=function(e,t,r,n){var o=r[0]||e.left,a=r[1]||e.top,s=o+e.width,u=a+e.height*(n[1]||1),l={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:a,right:s,bottom:u}};return t.filter(function(c){return!c.isRectIgnored()}).map(function(c){return c.rect}).forEach(function(c){ur(l.inner,Object.assign({},c.inner)),ur(l.outer,Object.assign({},c.outer))}),lr(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,lr(l.outer),l},ur=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},lr=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},Se=function(e){return"number"==typeof e},Jn=function(e){return e<.5?2*e*e:(4-2*e)*e-1},cr={spring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiffness,r=void 0===t?.5:t,n=e.damping,o=void 0===n?.75:n,a=e.mass,s=void 0===a?10:a,u=null,l=null,c=0,f=!1,m=me({interpolate:function(v,_){if(!f){if(!Se(u)||!Se(l))return f=!0,void(c=0);(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(e-t)<n&&Math.abs(r)<n})(l+=c+=-(l-u)*r/s,u,c*=o)||_?(c=0,f=!0,m.onupdate(l=u),m.oncomplete(l)):m.onupdate(l)}},target:{set:function(v){if(Se(v)&&!Se(l)&&(l=v),null===u&&(u=v,l=v),l===(u=v)||typeof u>"u")return f=!0,c=0,m.onupdate(l),void m.oncomplete(l);f=!1},get:function(){return u}},resting:{get:function(){return f}},onupdate:function(v){},oncomplete:function(v){}});return m},tween:function(){var l,c,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,r=void 0===t?500:t,n=e.easing,o=void 0===n?Jn:n,a=e.delay,s=void 0===a?0:a,u=null,f=!0,d=!1,E=null,I=me({interpolate:function(_,D){f||null===E||(null===u&&(u=_),!(_-u<s)&&((l=_-u-s)>=r||D?(l=1,I.onupdate((c=d?0:1)*E),I.oncomplete(c*E),f=!0):(c=l/r,I.onupdate((l>=0?o(d?1-c:c):0)*E))))},target:{get:function(){return d?0:E},set:function(_){if(null===E)return E=_,I.onupdate(_),void I.oncomplete(_);_<E?(E=1,d=!0):(d=!1,E=_),f=!1,u=null}},resting:{get:function(){return f}},onupdate:function(_){},oncomplete:function(_){}});return I}},St=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach(function(o){e.forEach(function(a){var s=a,u=function(){return r[a]},l=function(f){return r[a]=f};"object"==typeof a&&(s=a.key,u=a.getter||u,l=a.setter||l),(!o[s]||n)&&(o[s]={get:u,set:l})})})},oe=function(e){return null!=e},si={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},li=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var r in t)if(t[r]!==e[r])return!0;return!1},ci=function(e,t){var r=t.opacity,n=t.perspective,o=t.translateX,a=t.translateY,s=t.scaleX,u=t.scaleY,l=t.rotateX,c=t.rotateY,f=t.rotateZ,d=t.originX,E=t.originY,m=t.width,I=t.height,v="",_="";(oe(d)||oe(E))&&(_+="transform-origin: "+(d||0)+"px "+(E||0)+"px;"),oe(n)&&(v+="perspective("+n+"px) "),(oe(o)||oe(a))&&(v+="translate3d("+(o||0)+"px, "+(a||0)+"px, 0) "),(oe(s)||oe(u))&&(v+="scale3d("+(oe(s)?s:1)+", "+(oe(u)?u:1)+", 1) "),oe(f)&&(v+="rotateZ("+f+"rad) "),oe(l)&&(v+="rotateX("+l+"rad) "),oe(c)&&(v+="rotateY("+c+"rad) "),v.length&&(_+="transform:"+v+";"),oe(r)&&(_+="opacity:"+r+";",0===r&&(_+="visibility:hidden;"),r<1&&(_+="pointer-events:none;")),oe(I)&&(_+="height:"+I+"px;"),oe(m)&&(_+="width:"+m+"px;");var D=e.elementCurrentStyle||"";(_.length!==D.length||_!==D)&&(e.style.cssText=_,e.elementCurrentStyle=_)},fi={styles:function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,o=e.viewExternalAPI,a=e.view,s=Object.assign({},r),u={};St(t,[n,o],r);var f=function(){return a.rect?sr(a.rect,a.childViews,[r.translateX||0,r.translateY||0],[r.scaleX||0,r.scaleY||0]):null};return n.rect={get:f},o.rect={get:f},t.forEach(function(d){r[d]=typeof s[d]>"u"?si[d]:s[d]}),{write:function(){if(li(u,r))return ci(a.element,r),Object.assign(u,Object.assign({},r)),!0},destroy:function(){}}},listeners:function(e){var o=e.viewExternalAPI,s=e.view,u=[],l=function(e){return function(t,r){e.addEventListener(t,r)}}(s.element),c=function(e){return function(t,r){e.removeEventListener(t,r)}}(s.element);return o.on=function(f,d){u.push({type:f,fn:d}),l(f,d)},o.off=function(f,d){u.splice(u.findIndex(function(E){return E.type===f&&E.fn===d}),1),c(f,d)},{write:function(){return!0},destroy:function(){u.forEach(function(d){c(d.type,d.fn)})}}},animations:function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,o=e.viewExternalAPI,a=Object.assign({},r),s=[];return k(t,function(u,l){var c=function(e,t,r){var n=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,o="string"==typeof n?n:n.type,a="object"==typeof n?Object.assign({},n):{};return cr[o]?cr[o](a):null}(l);c&&(c.onupdate=function(d){r[u]=d},c.target=a[u],St([{key:u,setter:function(E){c.target!==E&&(c.target=E)},getter:function(){return r[u]}}],[n,o],r,!0),s.push(c))}),{write:function(l){var c=document.hidden,f=!0;return s.forEach(function(d){d.resting||(f=!1),d.interpolate(l,c)}),f},destroy:function(){}}},apis:function(e){St(e.mixinConfig,e.viewExternalAPI,e.viewProps)}},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tag,r=void 0===t?"div":t,n=e.name,o=void 0===n?null:n,a=e.attributes,s=void 0===a?{}:a,u=e.read,l=void 0===u?function(){}:u,c=e.write,f=void 0===c?function(){}:c,d=e.create,E=void 0===d?function(){}:d,m=e.destroy,I=void 0===m?function(){}:m,v=e.filterFrameActionsForChild,_=void 0===v?function(O,S){return S}:v,D=e.didCreateView,P=void 0===D?function(){}:D,h=e.didWriteView,F=void 0===h?function(){}:h,R=e.ignoreRect,H=void 0!==R&&R,z=e.ignoreRectUpdate,y=void 0!==z&&z,A=e.mixins,w=void 0===A?[]:A;return function(O){var V,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=ne(r,"filepond--"+o,s),W=window.getComputedStyle(L,null),Y=fr(),M=null,T=!1,p=[],b=[],N={},G={},U=[f],q=[l],X=[I],Q=function(){return L},He=function(){return p.concat()},zn=function(){return M||(M=sr(Y,p,[0,0],[1,1]))},Wn={element:{get:Q},style:{get:function(){return W}},childViews:{get:He}},jn=Object.assign({},Wn,{rect:{get:zn},ref:{get:function(){return N}},is:function(V){return o===V},appendChild:Ge(L),createChildView:(V=O,function(he,Re){return he(V,Re)}),linkView:function(V){return p.push(V),V},unlinkView:function(V){p.splice(p.indexOf(V),1)},appendChildView:$(0,p),removeChildView:Ie(L,p),registerWriter:function(V){return U.push(V)},registerReader:function(V){return q.push(V)},registerDestroyer:function(V){return X.push(V)},invalidateLayout:function(){return L.layoutCalculated=!1},dispatch:O.dispatch,query:O.query}),kn={element:{get:Q},childViews:{get:He},rect:{get:zn},resting:{get:function(){return T}},isRectIgnored:function(){return H},_read:function(){M=null,p.forEach(function(Re){return Re._read()}),!(y&&Y.width&&Y.height)&&fr(Y,L,W);var he={root:ye,props:S,rect:Y};q.forEach(function(Re){return Re(he)})},_write:function(V,he,Re){var ze=0===he.length;return U.forEach(function(le){!1===le({props:S,root:ye,actions:he,timestamp:V,shouldOptimize:Re})&&(ze=!1)}),b.forEach(function(le){!1===le.write(V)&&(ze=!1)}),p.filter(function(le){return!!le.element.parentNode}).forEach(function(le){le._write(V,_(le,he),Re)||(ze=!1)}),p.forEach(function(le,Fe){le.element.parentNode||(ye.appendChild(le.element,Fe),le._read(),le._write(V,_(le,he),Re),ze=!1)}),T=ze,F({props:S,root:ye,actions:he,timestamp:V}),ze},_destroy:function(){b.forEach(function(V){return V.destroy()}),X.forEach(function(V){V({root:ye,props:S})}),p.forEach(function(V){return V._destroy()})}},gu=Object.assign({},Wn,{rect:{get:function(){return Y}}});Object.keys(w).sort(function(j,V){return"styles"===j?1:"styles"===V?-1:0}).forEach(function(j){var V=fi[j]({mixinConfig:w[j],viewProps:S,viewState:G,viewInternalAPI:jn,viewExternalAPI:kn,view:me(gu)});V&&b.push(V)});var ye=me(jn);E({root:ye,props:S});var mu=Qn(L);return p.forEach(function(j,V){ye.appendChild(j.element,mu+V)}),P(ye),me(kn)}},ae=function(e,t){return function(r){var n=r.root,o=r.props,a=r.actions,s=void 0===a?[]:a,u=r.timestamp,l=r.shouldOptimize;s.filter(function(c){return e[c.type]}).forEach(function(c){return e[c.type]({root:n,props:o,action:c.data,timestamp:u,shouldOptimize:l})}),t&&t({root:n,props:o,actions:s,timestamp:u,shouldOptimize:l})}},dr=function(e,t){return t.parentNode.insertBefore(e,t)},pr=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},rt=function(e){return Array.isArray(e)},Te=function(e){return null==e},pi=function(e){return e.trim()},nt=function(e){return""+e},vr=function(e){return"boolean"==typeof e},Er=function(e){return vr(e)?e:"true"===e},se=function(e){return"string"==typeof e},gr=function(e){return Se(e)?e:se(e)?nt(e).replace(/[a-z]+/gi,""):0},it=function(e){return parseInt(gr(e),10)},mr=function(e){return parseFloat(gr(e))},Be=function(e){return Se(e)&&isFinite(e)&&Math.floor(e)===e},Ir=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Be(e))return e;var r=nt(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),it(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),it(r)*t):it(r)},be=function(e){return"function"==typeof e},Tr={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},mi=function(e,t,r,n,o){if(null===t)return null;if("function"==typeof t)return t;var a={url:"GET"===r||"PATCH"===r?"?"+e+"=":"",method:r,headers:o,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(se(t))return a.url=t,a;if(Object.assign(a,t),se(a.headers)){var s=a.headers.split(/:(.+)/);a.headers={header:s[0],value:s[1]}}return a.withCredentials=Er(a.withCredentials),a},re=function(e){return"object"==typeof e&&null!==e},bt=function(e){return rt(e)?"array":function(e){return null===e}(e)?"null":Be(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":function(e){return re(e)&&se(e.url)&&re(e.process)&&re(e.revert)&&re(e.restore)&&re(e.fetch)}(e)?"api":typeof e},Ri={array:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Te(e)?[]:rt(e)?e:nt(e).split(t).map(pi).filter(function(r){return r.length})},boolean:Er,int:function(e){return"bytes"===bt(e)?Ir(e):it(e)},number:mr,float:mr,bytes:Ir,string:function(e){return be(e)?e:nt(e)},function:function(e){return function(e){for(var t=self,r=e.split("."),n=null;n=r.shift();)if(!(t=t[n]))return null;return t}(e)},serverapi:function(e){return function(e){var t={};return t.url=se(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},k(Tr,function(r){t[r]=mi(r,e[r],Tr[r],t.timeout,t.headers)}),t.process=e.process||se(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t}(e)},object:function(e){try{return JSON.parse(function(e){return e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')}(e))}catch{return null}}},_r=function(e,t,r){if(e===t)return e;var n=bt(e);if(n!==r){var o=function(e,t){return Ri[t](e)}(e,r);if(n=bt(o),null===o)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+r+'"';e=o}return e},Di=function(e){var t={};return k(e,function(r){var n=e[r];t[r]=function(e,t){var r=e;return{enumerable:!0,get:function(){return r},set:function(o){r=_r(o,e,t)}}}(n[0],n[1])}),me(t)},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(r){return r.toLowerCase()}).join(t)},Pi=function(e){return function(t,r,n){var o={};return k(e,function(a){var s=ot(a,"_").toUpperCase();o["SET_"+s]=function(u){try{n.options[a]=u.value}catch{}t("DID_SET_"+s,{value:n.options[a]})}}),o}},Ai=function(e){return function(t){var r={};return k(e,function(n){r["GET_"+ot(n,"_").toUpperCase()]=function(o){return t.options[n]}}),r}},fe_API=1,fe_DROP=2,fe_BROWSE=3,fe_PASTE=4,fe_NONE=5,Pt=function(){return Math.random().toString(36).substring(2,11)};function hr(i){this.wrapped=i}function We(i){var e,t;function n(a,s){try{var u=i[a](s),l=u.value,c=l instanceof hr;Promise.resolve(c?l.wrapped:l).then(function(f){c?n("next",f):o(u.done?"return":"normal",f)},function(f){n("throw",f)})}catch(f){o("throw",f)}}function o(a,s){switch(a){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?n(e.key,e.arg):t=null}this._invoke=function r(a,s){return new Promise(function(u,l){var c={key:a,arg:s,resolve:u,reject:l,next:null};t?t=t.next=c:(e=t=c,n(a,s))})},"function"!=typeof i.return&&(this.return=void 0)}function Ni(i,e){if(null==i)return{};var r,n,t=function Ci(i,e){if(null==i)return{};var n,o,t={},r=Object.keys(i);for(o=0;o<r.length;o++)!(e.indexOf(n=r[o])>=0)&&(t[n]=i[n]);return t}(i,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)!(e.indexOf(r=o[n])>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}function lt(i){return function Ui(i){if(Array.isArray(i)){for(var e=0,t=new Array(i.length);e<i.length;e++)t[e]=i[e];return t}}(i)||function br(i){if(Symbol.iterator in Object(i)||"[object Arguments]"===Object.prototype.toString.call(i))return Array.from(i)}(i)||function qi(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"function"==typeof Symbol&&Symbol.asyncIterator&&(We.prototype[Symbol.asyncIterator]=function(){return this}),We.prototype.next=function(i){return this._invoke("next",i)},We.prototype.throw=function(i){return this._invoke("throw",i)},We.prototype.return=function(i){return this._invoke("return",i)};var e,t,Gt=function(e,t){return e.splice(t,1)},ct=function(){var e=[],t=function(o,a){Gt(e,e.findIndex(function(s){return s.event===o&&(s.cb===a||!a)}))},r=function(o,a,s){e.filter(function(u){return u.event===o}).map(function(u){return u.cb}).forEach(function(u){return function(e,t){t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)}(function(){return u.apply(void 0,lt(a))},s)})};return{fireSync:function(o){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];r(o,s,!0)},fire:function(o){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];r(o,s,!1)},on:function(o,a){e.push({event:o,cb:a})},onOnce:function(o,a){e.push({event:o,cb:function(){t(o,a),a.apply(void 0,arguments)}})},off:t}},Cr=function(e,t,r){Object.getOwnPropertyNames(e).filter(function(n){return!r.includes(n)}).forEach(function(n){return Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})},Xi=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ue=function(e){var t={};return Cr(e,t,Xi),t},C={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},te={INPUT:1,LIMBO:2,LOCAL:3},Nr=function(e){return/[^0-9]+/.exec(e)},Fr=function(){return Nr(1.1.toLocaleString())[0]},g={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Bt=[],ve=function(e,t,r){return new Promise(function(n,o){var a=Bt.filter(function(u){return u.key===e}).map(function(u){return u.cb});if(0!==a.length){var s=a.shift();a.reduce(function(u,l){return u.then(function(c){return l(c,r)})},s(t,r)).then(function(u){return n(u)}).catch(function(u){return o(u)})}else n(t)})},Pe=function(e,t,r){return Bt.filter(function(n){return n.key===e}).map(function(n){return n.cb(t,r)})},Ki=function(e,t){return Bt.push({key:e,cb:t})},ft=function(){return Object.assign({},Ue)},Ue={id:[null,g.STRING],name:["filepond",g.STRING],disabled:[!1,g.BOOLEAN],className:[null,g.STRING],required:[!1,g.BOOLEAN],captureMethod:[null,g.STRING],allowSyncAcceptAttribute:[!0,g.BOOLEAN],allowDrop:[!0,g.BOOLEAN],allowBrowse:[!0,g.BOOLEAN],allowPaste:[!0,g.BOOLEAN],allowMultiple:[!1,g.BOOLEAN],allowReplace:[!0,g.BOOLEAN],allowRevert:[!0,g.BOOLEAN],allowRemove:[!0,g.BOOLEAN],allowProcess:[!0,g.BOOLEAN],allowReorder:[!1,g.BOOLEAN],allowDirectoriesOnly:[!1,g.BOOLEAN],storeAsFile:[!1,g.BOOLEAN],forceRevert:[!1,g.BOOLEAN],maxFiles:[null,g.INT],checkValidity:[!1,g.BOOLEAN],itemInsertLocationFreedom:[!0,g.BOOLEAN],itemInsertLocation:["before",g.STRING],itemInsertInterval:[75,g.INT],dropOnPage:[!1,g.BOOLEAN],dropOnElement:[!0,g.BOOLEAN],dropValidation:[!1,g.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],g.ARRAY],instantUpload:[!0,g.BOOLEAN],maxParallelUploads:[2,g.INT],allowMinimumUploadDuration:[!0,g.BOOLEAN],chunkUploads:[!1,g.BOOLEAN],chunkForce:[!1,g.BOOLEAN],chunkSize:[5e6,g.INT],chunkRetryDelays:[[500,1e3,3e3],g.ARRAY],server:[null,g.SERVER_API],fileSizeBase:[1e3,g.INT],labelFileSizeBytes:["bytes",g.STRING],labelFileSizeKilobytes:["KB",g.STRING],labelFileSizeMegabytes:["MB",g.STRING],labelFileSizeGigabytes:["GB",g.STRING],labelDecimalSeparator:[Fr(),g.STRING],labelThousandsSeparator:[(e=Fr(),t=1e3.toLocaleString(),"1000"!==t?Nr(t)[0]:"."===e?",":"."),g.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',g.STRING],labelInvalidField:["Field contains invalid files",g.STRING],labelFileWaitingForSize:["Waiting for size",g.STRING],labelFileSizeNotAvailable:["Size not available",g.STRING],labelFileCountSingular:["file in list",g.STRING],labelFileCountPlural:["files in list",g.STRING],labelFileLoading:["Loading",g.STRING],labelFileAdded:["Added",g.STRING],labelFileLoadError:["Error during load",g.STRING],labelFileRemoved:["Removed",g.STRING],labelFileRemoveError:["Error during remove",g.STRING],labelFileProcessing:["Uploading",g.STRING],labelFileProcessingComplete:["Upload complete",g.STRING],labelFileProcessingAborted:["Upload cancelled",g.STRING],labelFileProcessingError:["Error during upload",g.STRING],labelFileProcessingRevertError:["Error during revert",g.STRING],labelTapToCancel:["tap to cancel",g.STRING],labelTapToRetry:["tap to retry",g.STRING],labelTapToUndo:["tap to undo",g.STRING],labelButtonRemoveItem:["Remove",g.STRING],labelButtonAbortItemLoad:["Abort",g.STRING],labelButtonRetryItemLoad:["Retry",g.STRING],labelButtonAbortItemProcessing:["Cancel",g.STRING],labelButtonUndoItemProcessing:["Undo",g.STRING],labelButtonRetryItemProcessing:["Retry",g.STRING],labelButtonProcessItem:["Upload",g.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',g.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],oninit:[null,g.FUNCTION],onwarning:[null,g.FUNCTION],onerror:[null,g.FUNCTION],onactivatefile:[null,g.FUNCTION],oninitfile:[null,g.FUNCTION],onaddfilestart:[null,g.FUNCTION],onaddfileprogress:[null,g.FUNCTION],onaddfile:[null,g.FUNCTION],onprocessfilestart:[null,g.FUNCTION],onprocessfileprogress:[null,g.FUNCTION],onprocessfileabort:[null,g.FUNCTION],onprocessfilerevert:[null,g.FUNCTION],onprocessfile:[null,g.FUNCTION],onprocessfiles:[null,g.FUNCTION],onremovefile:[null,g.FUNCTION],onpreparefile:[null,g.FUNCTION],onupdatefiles:[null,g.FUNCTION],onreorderfiles:[null,g.FUNCTION],beforeDropFile:[null,g.FUNCTION],beforeAddFile:[null,g.FUNCTION],beforeRemoveFile:[null,g.FUNCTION],beforePrepareFile:[null,g.FUNCTION],stylePanelLayout:[null,g.STRING],stylePanelAspectRatio:[null,g.STRING],styleItemPanelAspectRatio:[null,g.STRING],styleButtonRemoveItemPosition:["left",g.STRING],styleButtonProcessItemPosition:["right",g.STRING],styleLoadIndicatorPosition:["right",g.STRING],styleProgressIndicatorPosition:["right",g.STRING],styleButtonRemoveItemAlign:[!1,g.BOOLEAN],files:[[],g.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],g.ARRAY]},Ae=function(e,t){return Te(t)?e[0]||null:Be(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find(function(r){return r.id===t})||null)},Gr=function(e){if(Te(e))return e;if(/:/.test(e)){var t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ee=function(e){return e.filter(function(t){return!t.archived})},Ve={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},dt=null,to=[C.LOAD_ERROR,C.PROCESSING_ERROR,C.PROCESSING_REVERT_ERROR],ro=[C.LOADING,C.PROCESSING,C.PROCESSING_QUEUED,C.INIT],no=[C.PROCESSING_COMPLETE],io=function(e){return to.includes(e.status)},oo=function(e){return ro.includes(e.status)},ao=function(e){return no.includes(e.status)},Br=function(e){return re(e.options.server)&&(re(e.options.server.process)||be(e.options.server.process))},so=function(e){return{GET_STATUS:function(){var r=Ee(e.items),o=Ve.ERROR,a=Ve.BUSY,s=Ve.IDLE,u=Ve.READY;return 0===r.length?Ve.EMPTY:r.some(io)?o:r.some(oo)?a:r.some(ao)?u:s},GET_ITEM:function(r){return Ae(e.items,r)},GET_ACTIVE_ITEM:function(r){return Ae(Ee(e.items),r)},GET_ACTIVE_ITEMS:function(){return Ee(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(r){var n=Ae(e.items,r);return n?n.filename:null},GET_ITEM_SIZE:function(r){var n=Ae(e.items,r);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter(function(r){return/^style/.test(r)}).map(function(r){return{name:r,value:e.options[r]}})},GET_PANEL_ASPECT_RATIO:function(){return/circle/.test(e.options.stylePanelLayout)?1:Gr(e.options.stylePanelAspectRatio)},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(r){return Ee(e.items).filter(function(n){return n.status===r})},GET_TOTAL_ITEMS:function(){return Ee(e.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return e.options.storeAsFile&&function(){if(null===dt)try{var e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));var t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,dt=1===t.files.length}catch{dt=!1}return dt}()&&!Br(e)},IS_ASYNC:function(){return Br(e)},GET_FILE_SIZE_LABELS:function(r){return{labelBytes:r("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:r("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:r("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:r("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},Ur=function(e,t,r){return Math.max(Math.min(r,e),t)},Ut=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},Xe=function(e){return(""+e).split("/").pop().split("?").shift()},pt=function(e){return e.split(".").pop()},$e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t+e).slice(-t.length)},Vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+$e(e.getMonth()+1,"00")+"-"+$e(e.getDate(),"00")+"_"+$e(e.getHours(),"00")+"-"+$e(e.getMinutes(),"00")+"-"+$e(e.getSeconds(),"00")},xe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.slice(0,e.size,"string"==typeof r?r:e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),se(t)||(t=Vr()),t&&null===n&&pt(t)?o.name=t:(n=n||function(e){if("string"!=typeof e)return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""}(o.type),o.name=t+(n?"."+n:"")),o},xr=function(e,t){var r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){var n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},qr=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},mo=function(e){var t=qr(e),r=function(e){return atob(function(e){return e.split(",")[1].replace(/\s/g,"")}(e))}(e);return function(e,t){for(var r=new ArrayBuffer(e.length),n=new Uint8Array(r),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return xr(r,t)}(r,t)},To=function(e){if(!/^content-disposition:/i.test(e))return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(function(r){return r.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(r){return r.length});return t.length?decodeURI(t[t.length-1]):null},_o=function(e){if(/content-length:/i.test(e)){var t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},ho=function(e){return/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null},Vt=function(e){var t={source:null,name:null,size:null},r=e.split("\n"),n=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value,c=To(l);if(c)t.name=c;else{var f=_o(l);if(f)t.size=f;else{var d=ho(l);d&&(t.source=d)}}}}catch(E){o=!0,a=E}finally{try{!n&&null!=s.return&&s.return()}finally{if(o)throw a}}return t},Ro=function(e){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},a=function(l){e?(t.timestamp=Date.now(),t.request=e(l,function(c){t.duration=Date.now()-t.timestamp,t.complete=!0,c instanceof Blob&&(c=xe(c,c.name||Xe(l))),s.fire("load",c instanceof Blob?c:c?c.body:null)},function(c){s.fire("error","string"==typeof c?{type:"error",code:0,body:c}:c)},function(c,f,d){d&&(t.size=d),t.duration=Date.now()-t.timestamp,c?(t.progress=f/d,s.fire("progress",t.progress)):t.progress=null},function(){s.fire("abort")},function(c){var f=Vt("string"==typeof c?c:c.headers);s.fire("meta",{size:t.size||f.size,filename:f.name,source:f.source})})):s.fire("error",{type:"error",body:"Can't load URL",code:400})},s=Object.assign({},ct(),{setSource:function(l){return t.source=l},getProgress:function(){return t.progress},abort:function(){t.request&&t.request.abort&&t.request.abort()},load:function(){var l=t.source;s.fire("init",l),l instanceof File?s.fire("load",l):l instanceof Blob?s.fire("load",xe(l,l.name)):Ut(l)?s.fire("load",function(e,t,r){return xe(mo(e),t,null,r)}(l)):a(l)}});return s},Yr=function(e){return/GET|HEAD/.test(e)},we=function(e,t,r){var n={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){o=!0,s.abort()}},o=!1,a=!1;r=Object.assign({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),Yr(r.method)&&e&&(t=""+t+encodeURIComponent("string"==typeof e?e:JSON.stringify(e)));var s=new XMLHttpRequest;return(Yr(r.method)?s:s.upload).onprogress=function(l){o||n.onprogress(l.lengthComputable,l.loaded,l.total)},s.onreadystatechange=function(){s.readyState<2||4===s.readyState&&0===s.status||a||(a=!0,n.onheaders(s))},s.onload=function(){s.status>=200&&s.status<300?n.onload(s):n.onerror(s)},s.onerror=function(){return n.onerror(s)},s.onabort=function(){o=!0,n.onabort()},s.ontimeout=function(){return n.ontimeout(s)},s.open(r.method,t,!0),Be(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach(function(l){var c=unescape(encodeURIComponent(r.headers[l]));s.setRequestHeader(l,c)}),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),n},Z=function(e,t,r,n){return{type:e,code:t,body:r,headers:n}},Le=function(e){return function(t){e(Z("error",0,"Timeout",t.getAllResponseHeaders()))}},Hr=function(e){return/\?/.test(e)},Qe=function(){for(var e="",t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(o){e+=Hr(e)&&Hr(o)?o.replace(/\?/,"&"):o}),e},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!se(t.url))return null;var r=t.onload||function(o){return o},n=t.onerror||function(o){return null};return function(o,a,s,u,l,c){var f=we(o,Qe(e,t.url),Object.assign({},t,{responseType:"blob"}));return f.onload=function(d){var E=d.getAllResponseHeaders(),m=Vt(E).name||Xe(o);a(Z("load",d.status,"HEAD"===t.method?null:xe(r(d.response),m),E))},f.onerror=function(d){s(Z("error",d.status,n(d.response)||d.statusText,d.getAllResponseHeaders()))},f.onheaders=function(d){c(Z("headers",d.status,null,d.getAllResponseHeaders()))},f.ontimeout=Le(s),f.onprogress=u,f.onabort=l,f}},de_QUEUED=0,de_COMPLETE=1,de_PROCESSING=2,de_ERROR=3,de_WAITING=4,Oo=function(e,t,r,n,o,a,s,u,l,c,f){for(var d=[],m=f.chunkServer,I=f.chunkSize,v=f.chunkRetryDelays,_={serverId:f.chunkTransferId,aborted:!1},D=t.ondata||function(T){return T},P=t.onload||function(T,p){return"HEAD"===p?T.getResponseHeader("Upload-Offset"):T.response},h=t.onerror||function(T){return null},H=Math.floor(n.size/I),z=0;z<=H;z++){var y=z*I,A=n.slice(y,y+I,"application/offset+octet-stream");d[z]={index:z,size:A.size,offset:y,data:A,file:n,progress:0,retries:lt(v),status:de_QUEUED,error:null,request:null,timeout:null}}var p,b,G,U,O=function(p){return p.status===de_QUEUED||p.status===de_ERROR},S=function(p){if(!_.aborted){if(!(p=p||d.find(O)))return void(d.every(function(Q){return Q.status===de_COMPLETE})&&a(_.serverId));p.status=de_PROCESSING,p.progress=null;var b=m.ondata||function(Q){return Q},N=m.onerror||function(Q){return null},G=m.onload||function(){},U=Qe(e,m.url,_.serverId),q="function"==typeof m.headers?m.headers(p):Object.assign({},m.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":p.offset,"Upload-Length":n.size,"Upload-Name":n.name}),X=p.request=we(b(p.data),U,Object.assign({},m,{headers:q}));X.onload=function(Q){G(Q,p.index,d.length),p.status=de_COMPLETE,p.request=null,Y()},X.onprogress=function(Q,He,Hn){p.progress=Q?He:null,W()},X.onerror=function(Q){p.status=de_ERROR,p.request=null,p.error=N(Q.response)||Q.statusText,L(p)||s(Z("error",Q.status,N(Q.response)||Q.statusText,Q.getAllResponseHeaders()))},X.ontimeout=function(Q){p.status=de_ERROR,p.request=null,L(p)||Le(s)(Q)},X.onabort=function(){p.status=de_QUEUED,p.request=null,l()}}},L=function(p){return 0!==p.retries.length&&(p.status=de_WAITING,clearTimeout(p.timeout),p.timeout=setTimeout(function(){S(p)},p.retries.shift()),!0)},W=function(){var p=d.reduce(function(N,G){return null===N||null===G.progress?null:N+G.progress},0);if(null===p)return u(!1,0,0);var b=d.reduce(function(N,G){return N+G.size},0);u(!0,p,b)},Y=function(){d.filter(function(b){return b.status===de_PROCESSING}).length>=1||S()};return _.serverId?(p=function(T){_.aborted||(d.filter(function(p){return p.offset<T}).forEach(function(p){p.status=de_COMPLETE,p.progress=p.size}),Y())},b=Qe(e,m.url,_.serverId),G={headers:"function"==typeof t.headers?t.headers(_.serverId):Object.assign({},t.headers),method:"HEAD"},(U=we(null,b,G)).onload=function(q){return p(P(q,G.method))},U.onerror=function(q){return s(Z("error",q.status,h(q.response)||q.statusText,q.getAllResponseHeaders()))},U.ontimeout=Le(s)):function(p){var b=new FormData;re(o)&&b.append(r,JSON.stringify(o));var N="function"==typeof t.headers?t.headers(n,o):Object.assign({},t.headers,{"Upload-Length":n.size}),G=Object.assign({},t,{headers:N}),U=we(D(b),Qe(e,t.url),G);U.onload=function(q){return p(P(q,G.method))},U.onerror=function(q){return s(Z("error",q.status,h(q.response)||q.statusText,q.getAllResponseHeaders()))},U.ontimeout=Le(s)}(function(T){_.aborted||(c(T),_.serverId=T,Y())}),{abort:function(){_.aborted=!0,d.forEach(function(p){clearTimeout(p.timeout),p.request&&p.request.abort()})}}},Do=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return"function"==typeof t?function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t.apply(void 0,[r].concat(a,[n]))}:t&&se(t.url)?function(e,t,r,n){return function(o,a,s,u,l,c,f){if(o){var d=n.chunkUploads;if(o instanceof Blob&&d&&(d&&o.size>n.chunkSize||n.chunkForce))return Oo(e,t,r,o,a,s,u,l,c,f,n);var I=t.ondata||function(R){return R},v=t.onload||function(R){return R},_=t.onerror||function(R){return null},D="function"==typeof t.headers?t.headers(o,a)||{}:Object.assign({},t.headers),P=Object.assign({},t,{headers:D}),h=new FormData;re(a)&&h.append(r,JSON.stringify(a)),(o instanceof Blob?[{name:null,file:o}]:o).forEach(function(R){h.append(r,R.file,null===R.name?R.file.name:""+R.name+R.file.name)});var F=we(I(h),Qe(e,t.url),P);return F.onload=function(R){s(Z("load",R.status,v(R.response),R.getAllResponseHeaders()))},F.onerror=function(R){u(Z("error",R.status,_(R.response)||R.statusText,R.getAllResponseHeaders()))},F.ontimeout=Le(u),F.onprogress=l,F.onabort=c,F}}}(e,t,r,n):null},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!se(t.url))return function(o,a){return a()};var r=t.onload||function(o){return o},n=t.onerror||function(o){return null};return function(o,a,s){var u=we(o,e+t.url,t);return u.onload=function(l){a(Z("load",l.status,r(l.response),l.getAllResponseHeaders()))},u.onerror=function(l){s(Z("error",l.status,n(l.response)||l.statusText,l.getAllResponseHeaders()))},u.ontimeout=Le(s),u}},zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+Math.random()*(t-e)},bo=function(e,t){var r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},n=t.allowMinimumUploadDuration,a=function(){r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},u=n?function(){return r.progress?Math.min(r.progress,r.perceivedProgress):null}:function(){return r.progress||null},l=n?function(){return Math.min(r.duration,r.perceivedDuration)}:function(){return r.duration},c=Object.assign({},ct(),{process:function(d,E){var m=function(){0===r.duration||null===r.progress||c.fire("progress",c.getProgress())},I=function(){r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=null,s=Date.now();return t>0&&function l(){var c=Date.now()-s,f=zr(n,o);c+f>t&&(f=c+f-t);var d=c/t;d>=1||document.hidden?e(1):(e(d),a=setTimeout(l,f))}(),{clear:function(){clearTimeout(a)}}}(function(v){r.perceivedProgress=v,r.perceivedDuration=Date.now()-r.timestamp,m(),r.response&&1===r.perceivedProgress&&!r.complete&&I()},n?zr(750,1500):0),r.request=e(d,E,function(v){r.response=re(v)?v:{type:"load",code:200,body:""+v,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&1===r.perceivedProgress)&&I()},function(v){r.perceivedPerformanceUpdater.clear(),c.fire("error",re(v)?v:{type:"error",code:0,body:""+v})},function(v,_,D){r.duration=Date.now()-r.timestamp,r.progress=v?_/D:null,m()},function(){r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)},function(v){c.fire("transfer",v)})},abort:a,getProgress:u,getDuration:l,reset:function(){a(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return c},Wr=function(e){return e.substring(0,e.lastIndexOf("."))||e},Me=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},Ao=function i(e){if(!re(e))return e;var t=rt(e)?[]:{};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]=n&&re(n)?i(n):n}return t},wo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Pt(),o={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?C.PROCESSING_COMPLETE:C.INIT,activeLoader:null,activeProcessor:null},a=null,s={},u=function(A){return o.status=A},l=function(A){if(!o.released&&!o.frozen){for(var w=arguments.length,O=new Array(w>1?w-1:0),S=1;S<w;S++)O[S-1]=arguments[S];H.fire.apply(H,[A].concat(O))}},F=function(A,w,O){var S=A.split("."),L=S[0],W=S.pop(),Y=s;S.forEach(function(M){return Y=Y[M]}),JSON.stringify(Y[W])!==JSON.stringify(w)&&(Y[W]=w,l("metadata-update",{key:L,value:s[L],silent:O}))},H=Object.assign({id:{get:function(){return n}},origin:{get:function(){return e},set:function(A){return e=A}},serverId:{get:function(){return o.serverFileReference}},transferId:{get:function(){return o.transferId}},status:{get:function(){return o.status}},filename:{get:function(){return o.file.name}},filenameWithoutExtension:{get:function(){return Wr(o.file.name)}},fileExtension:{get:function(){return pt(o.file.name)}},fileType:{get:function(){return o.file.type}},fileSize:{get:function(){return o.file.size}},file:{get:function(){return o.file}},relativePath:{get:function(){return o.file._relativePath}},source:{get:function(){return o.source}},getMetadata:function(A){return Ao(A?s[A]:s)},setMetadata:function(A,w,O){if(re(A)){var S=A;return Object.keys(S).forEach(function(L){F(L,S[L],w)}),A}return F(A,w,O),w},extend:function(A,w){return z[A]=w},abortLoad:function(){o.activeLoader?o.activeLoader.abort():(u(C.INIT),l("load-abort"))},retryLoad:function(){o.activeLoader&&o.activeLoader.load()},requestProcessing:function(){o.processingAborted=!1,u(C.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise(function(A){if(!o.activeProcessor)return o.processingAborted=!0,u(C.IDLE),l("process-abort"),void A();a=function(){A()},o.activeProcessor.abort()})},load:function(A,w,O){o.source=A,H.fireSync("init"),o.file?H.fireSync("load-skip"):(o.file=function(e){var t=[e.name,e.size,e.type];return e instanceof Blob||Ut(e)?t[0]=e.name||Vr():Ut(e)?(t[1]=e.length,t[2]=qr(e)):se(e)&&(t[0]=Xe(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}}(A),w.on("init",function(){l("load-init")}),w.on("meta",function(S){o.file.size=S.size,o.file.filename=S.filename,S.source&&(e=te.LIMBO,o.serverFileReference=S.source,o.status=C.PROCESSING_COMPLETE),l("load-meta")}),w.on("progress",function(S){u(C.LOADING),l("load-progress",S)}),w.on("error",function(S){u(C.LOAD_ERROR),l("load-request-error",S)}),w.on("abort",function(){u(C.INIT),l("load-abort")}),w.on("load",function(S){o.activeLoader=null;var L=function(M){o.file=Me(M)?M:o.file,u(e===te.LIMBO&&o.serverFileReference?C.PROCESSING_COMPLETE:C.IDLE),l("load")};o.serverFileReference?L(S):O(S,L,function(M){o.file=S,l("load-meta"),u(C.LOAD_ERROR),l("load-file-error",M)})}),w.setSource(A),o.activeLoader=w,w.load())},process:function y(A,w){if(o.processingAborted)o.processingAborted=!1;else if(u(C.PROCESSING),a=null,o.file instanceof Blob){A.on("load",function(L){o.transferId=null,o.serverFileReference=L}),A.on("transfer",function(L){o.transferId=L}),A.on("load-perceived",function(L){o.activeProcessor=null,o.transferId=null,o.serverFileReference=L,u(C.PROCESSING_COMPLETE),l("process-complete",L)}),A.on("start",function(){l("process-start")}),A.on("error",function(L){o.activeProcessor=null,u(C.PROCESSING_ERROR),l("process-error",L)}),A.on("abort",function(L){o.activeProcessor=null,o.serverFileReference=L,u(C.IDLE),l("process-abort"),a&&a()}),A.on("progress",function(L){l("process-progress",L)});var S=console.error;w(o.file,function(W){o.archived||A.process(W,Object.assign({},s))},S),o.activeProcessor=A}else H.on("load",function(){y(A,w)})},revert:function(A,w){return new Promise(function(O,S){var L=null!==o.serverFileReference?o.serverFileReference:o.transferId;null!==L?(A(L,function(){o.serverFileReference=null,o.transferId=null,O()},function(W){w?(u(C.PROCESSING_REVERT_ERROR),l("process-revert-error"),S(W)):O()}),u(C.IDLE),l("process-revert")):O()})}},ct(),{freeze:function(){return o.frozen=!0},release:function(){return o.released=!0},released:{get:function(){return o.released}},archive:function(){return o.archived=!0},archived:{get:function(){return o.archived}},setFile:function(A){return o.file=A}}),z=me(H);return z},jr=function(e,t){var r=function(e,t){return Te(t)?0:se(t)?e.findIndex(function(r){return r.id===t}):-1}(e,t);if(!(r<0))return e[r]||null},kr=function(e,t,r,n,o,a){var s=we(null,e,{method:"GET",responseType:"blob"});return s.onload=function(u){var l=u.getAllResponseHeaders(),c=Vt(l).name||Xe(e);t(Z("load",u.status,xe(u.response,c),l))},s.onerror=function(u){r(Z("error",u.status,u.statusText,u.getAllResponseHeaders()))},s.onheaders=function(u){a(Z("headers",u.status,null,u.getAllResponseHeaders()))},s.ontimeout=Le(r),s.onprogress=n,s.onabort=o,s},Xr=function(e){return 0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},vt=function(e){return function(){return be(e)?e.apply(void 0,arguments):e}},qt=function(e,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(function(){e("DID_UPDATE_ITEMS",{items:Ee(t.items)})},0)},$r=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise(function(o){if(!e)return o(!0);var a=e.apply(void 0,r);return null==a?o(!0):"boolean"==typeof a?o(a):void("function"==typeof a.then&&a.then(o))})},Yt=function(e,t){e.items.sort(function(r,n){return t(ue(r),ue(n))})},pe=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.query,o=r.success,a=void 0===o?function(){}:o,s=r.failure,u=void 0===s?function(){}:s,l=Ni(r,["query","success","failure"]),c=Ae(e.items,n);c?t(c,a,u,l||{}):u({error:Z("error",0,"Item not found"),file:null})}},No=function(e,t,r){return{ABORT_ALL:function(){Ee(r.items).forEach(function(o){o.freeze(),o.abortLoad(),o.abortProcessing()})},DID_SET_FILES:function(o){var a=o.value,u=(void 0===a?[]:a).map(function(c){return{source:c.source?c.source:c,options:c.options}}),l=Ee(r.items);l.forEach(function(c){u.find(function(f){return f.source===c.source||f.source===c.file})||e("REMOVE_ITEM",{query:c,remove:!1})}),l=Ee(r.items),u.forEach(function(c,f){l.find(function(d){return d.source===c.source||d.file===c.source})||e("ADD_ITEM",Object.assign({},c,{interactionMethod:fe_NONE,index:f}))})},DID_UPDATE_ITEM_METADATA:function(o){var a=o.id,s=o.action,u=o.change;u.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(function(){var m,l=jr(r.items,a);if(t("IS_ASYNC")){l.origin===te.LOCAL&&e("DID_LOAD_ITEM",{id:l.id,error:null,serverFileReference:l.source});var c=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:a})},32)};return l.status===C.PROCESSING_COMPLETE?(m=r.options.instantUpload,void l.revert(Ke(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(m?c:function(){}).catch(function(){})):l.status===C.PROCESSING?function(m){l.abortProcessing().then(m?c:function(){})}(r.options.instantUpload):void(r.options.instantUpload&&c())}ve("SHOULD_PREPARE_OUTPUT",!1,{item:l,query:t,action:s,change:u}).then(function(E){var m=t("GET_BEFORE_PREPARE_FILE");m&&(E=m(l,E)),E&&e("REQUEST_PREPARE_OUTPUT",{query:a,item:l,success:function(v){e("DID_PREPARE_OUTPUT",{id:a,file:v})}},!0)})},0))},MOVE_ITEM:function(o){var s=o.index,u=Ae(r.items,o.query);if(u){var l=r.items.indexOf(u);l!==(s=Ur(s,0,r.items.length-1))&&r.items.splice(s,0,r.items.splice(l,1)[0])}},SORT:function(o){Yt(r,o.compare),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(o){var a=o.items,s=o.index,u=o.interactionMethod,l=o.success,c=void 0===l?function(){}:l,f=o.failure,d=void 0===f?function(){}:f,E=s;if(-1===s||typeof s>"u"){var m=t("GET_ITEM_INSERT_LOCATION"),I=t("GET_TOTAL_ITEMS");E="before"===m?0:I}var v=t("GET_IGNORED_FILES"),P=a.filter(function(F){return Me(F)?!v.includes(F.name.toLowerCase()):!Te(F)}).map(function(h){return new Promise(function(F,R){e("ADD_ITEM",{interactionMethod:u,source:h.source||h,success:F,failure:R,index:E++,options:h.options||{}})})});Promise.all(P).then(c).catch(d)},ADD_ITEM:function(o){var a=o.source,s=o.index,u=void 0===s?-1:s,l=o.interactionMethod,c=o.success,f=void 0===c?function(){}:c,d=o.failure,E=void 0===d?function(){}:d,m=o.options,I=void 0===m?{}:m;if(Te(a))E({error:Z("error",0,"No source"),file:null});else if(!Me(a)||!r.options.ignoredFiles.includes(a.name.toLowerCase())){if(!function(e){var t=Ee(e.items).length;if(!e.options.allowMultiple)return 0===t;var r=e.options.maxFiles;return null===r||t<r}(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){var v=Z("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:a,error:v}),void E({error:v,file:null})}var _=Ee(r.items)[0];if(_.status===C.PROCESSING_COMPLETE||_.status===C.PROCESSING_REVERT_ERROR){var D=t("GET_FORCE_REVERT");if(_.revert(Ke(r.options.server.url,r.options.server.revert),D).then(function(){D&&e("ADD_ITEM",{source:a,index:u,interactionMethod:l,success:f,failure:E,options:I})}).catch(function(){}),D)return}e("REMOVE_ITEM",{query:_.id})}var P="local"===I.type?te.LOCAL:"limbo"===I.type?te.LIMBO:te.INPUT,h=wo(P,P===te.INPUT?null:a,I.file);Object.keys(I.metadata||{}).forEach(function(O){h.setMetadata(O,I.metadata[O])}),Pe("DID_CREATE_ITEM",h,{query:t,dispatch:e});var F=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(u="before"===F?-1:r.items.length),function(e,t,r){Te(t)||(typeof r>"u"?e.push(t):function(e,t,r){e.splice(t,0,r)}(e,r=Ur(r,0,e.length),t))}(r.items,h,u),be(F)&&a&&Yt(r,F);var R=h.id;h.on("init",function(){e("DID_INIT_ITEM",{id:R})}),h.on("load-init",function(){e("DID_START_ITEM_LOAD",{id:R})}),h.on("load-meta",function(){e("DID_UPDATE_ITEM_META",{id:R})}),h.on("load-progress",function(O){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:R,progress:O})}),h.on("load-request-error",function(O){var S=vt(r.options.labelFileLoadError)(O);if(O.code>=400&&O.code<500)return e("DID_THROW_ITEM_INVALID",{id:R,error:O,status:{main:S,sub:O.code+" ("+O.body+")"}}),void E({error:O,file:ue(h)});e("DID_THROW_ITEM_LOAD_ERROR",{id:R,error:O,status:{main:S,sub:r.options.labelTapToRetry}})}),h.on("load-file-error",function(O){e("DID_THROW_ITEM_INVALID",{id:R,error:O.status,status:O.status}),E({error:O.status,file:ue(h)})}),h.on("load-abort",function(){e("REMOVE_ITEM",{query:R})}),h.on("load-skip",function(){h.on("metadata-update",function(O){Me(h.file)&&e("DID_UPDATE_ITEM_METADATA",{id:R,change:O})}),e("COMPLETE_LOAD_ITEM",{query:R,item:h,data:{source:a,success:f}})}),h.on("load",function(){var O=function(L){L?(h.on("metadata-update",function(W){e("DID_UPDATE_ITEM_METADATA",{id:R,change:W})}),ve("SHOULD_PREPARE_OUTPUT",!1,{item:h,query:t}).then(function(W){var Y=t("GET_BEFORE_PREPARE_FILE");Y&&(W=Y(h,W));var M=function(){e("COMPLETE_LOAD_ITEM",{query:R,item:h,data:{source:a,success:f}}),qt(e,r)};W?e("REQUEST_PREPARE_OUTPUT",{query:R,item:h,success:function(p){e("DID_PREPARE_OUTPUT",{id:R,file:p}),M()}},!0):M()})):e("REMOVE_ITEM",{query:R})};ve("DID_LOAD_ITEM",h,{query:t,dispatch:e}).then(function(){$r(t("GET_BEFORE_ADD_FILE"),ue(h)).then(O)}).catch(function(S){if(!S||!S.error||!S.status)return O(!1);e("DID_THROW_ITEM_INVALID",{id:R,error:S.error,status:S.status})})}),h.on("process-start",function(){e("DID_START_ITEM_PROCESSING",{id:R})}),h.on("process-progress",function(O){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:R,progress:O})}),h.on("process-error",function(O){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:R,error:O,status:{main:vt(r.options.labelFileProcessingError)(O),sub:r.options.labelTapToRetry}})}),h.on("process-revert-error",function(O){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:R,error:O,status:{main:vt(r.options.labelFileProcessingRevertError)(O),sub:r.options.labelTapToRetry}})}),h.on("process-complete",function(O){e("DID_COMPLETE_ITEM_PROCESSING",{id:R,error:null,serverFileReference:O}),e("DID_DEFINE_VALUE",{id:R,value:O})}),h.on("process-abort",function(){e("DID_ABORT_ITEM_PROCESSING",{id:R})}),h.on("process-revert",function(){e("DID_REVERT_ITEM_PROCESSING",{id:R}),e("DID_DEFINE_VALUE",{id:R,value:null})}),e("DID_ADD_ITEM",{id:R,index:u,interactionMethod:l}),qt(e,r);var H=r.options.server||{},z=H.url,y=H.load,A=H.restore,w=H.fetch;h.load(a,Ro(P===te.INPUT?se(a)&&function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Xr(location.href)!==Xr(e)}(a)&&w?xt(z,w):kr:xt(z,P===te.LIMBO?A:y)),function(O,S,L){ve("LOAD_FILE",O,{query:t}).then(S).catch(L)})}},REQUEST_PREPARE_OUTPUT:function(o){var a=o.item,s=o.success,u=o.failure,l=void 0===u?function(){}:u,c={error:Z("error",0,"Item not found"),file:null};if(a.archived)return l(c);ve("PREPARE_OUTPUT",a.file,{query:t,item:a}).then(function(f){ve("COMPLETE_PREPARE_OUTPUT",f,{query:t,item:a}).then(function(d){if(a.archived)return l(c);s(d)})})},COMPLETE_LOAD_ITEM:function(o){var a=o.item,s=o.data,u=s.success,l=s.source,c=t("GET_ITEM_INSERT_LOCATION");if(be(c)&&l&&Yt(r,c),e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.origin===te.INPUT?null:l}),u(ue(a)),a.origin!==te.LOCAL)return a.origin===te.LIMBO?(e("DID_COMPLETE_ITEM_PROCESSING",{id:a.id,error:null,serverFileReference:l}),void e("DID_DEFINE_VALUE",{id:a.id,value:a.serverId||l})):void(t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:a.id}));e("DID_LOAD_LOCAL_ITEM",{id:a.id})},RETRY_ITEM_LOAD:pe(r,function(n){n.retryLoad()}),REQUEST_ITEM_PREPARE:pe(r,function(n,o,a){e("REQUEST_PREPARE_OUTPUT",{query:n.id,item:n,success:function(u){e("DID_PREPARE_OUTPUT",{id:n.id,file:u}),o({file:n,output:u})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:pe(r,function(n,o,a){if(n.status===C.IDLE||n.status===C.PROCESSING_ERROR)n.status!==C.PROCESSING_QUEUED&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:o,failure:a},!0));else{var u=function(){return e("REQUEST_ITEM_PROCESSING",{query:n,success:o,failure:a})},l=function(){return document.hidden?u():setTimeout(u,32)};n.status===C.PROCESSING_COMPLETE||n.status===C.PROCESSING_REVERT_ERROR?n.revert(Ke(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(function(){}):n.status===C.PROCESSING&&n.abortProcessing().then(l)}}),PROCESS_ITEM:pe(r,function(n,o,a){var s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",C.PROCESSING).length!==s){if(n.status!==C.PROCESSING){var l=function f(){var d=r.processingQueue.shift();if(d){var E=d.id,m=d.success,I=d.failure,v=Ae(r.items,E);if(!v||v.archived)return void f();e("PROCESS_ITEM",{query:E,success:m,failure:I},!0)}};n.onOnce("process-complete",function(){if(o(ue(n)),l(),r.options.instantUpload&&n.origin===te.LOCAL&&be(r.options.server.remove)){var E=function(){};n.origin=te.LIMBO,r.options.server.remove(n.source,E,E)}t("GET_ITEMS_BY_STATUS",C.PROCESSING_COMPLETE).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),n.onOnce("process-error",function(f){a({error:f,file:ue(n)}),l()});var c=r.options;n.process(bo(Do(c.server.url,c.server.process,c.name,{chunkTransferId:n.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),function(f,d,E){ve("PREPARE_OUTPUT",f,{query:t,item:n}).then(function(m){e("DID_PREPARE_OUTPUT",{id:n.id,file:m}),d(m)}).catch(E)})}}else r.processingQueue.push({id:n.id,success:o,failure:a})}),RETRY_ITEM_PROCESSING:pe(r,function(n){e("REQUEST_ITEM_PROCESSING",{query:n})}),REQUEST_REMOVE_ITEM:pe(r,function(n){$r(t("GET_BEFORE_REMOVE_FILE"),ue(n)).then(function(o){o&&e("REMOVE_ITEM",{query:n})})}),RELEASE_ITEM:pe(r,function(n){n.release()}),REMOVE_ITEM:pe(r,function(n,o,a,s){var u=function(){var f=n.id;jr(r.items,f).archive(),e("DID_REMOVE_ITEM",{error:null,id:f,item:n}),qt(e,r),o(ue(n))},l=r.options.server;n.origin===te.LOCAL&&l&&be(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:n.id}),l.remove(n.source,function(){return u()},function(c){e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:Z("error",0,c,null),status:{main:vt(r.options.labelFileRemoveError)(c),sub:r.options.labelTapToRetry}})})):((s.revert&&n.origin!==te.LOCAL&&null!==n.serverId||r.options.chunkUploads&&n.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&n.revert(Ke(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:pe(r,function(n){n.abortLoad()}),ABORT_ITEM_PROCESSING:pe(r,function(n){n.serverId?e("REVERT_ITEM_PROCESSING",{id:n.id}):n.abortProcessing().then(function(){r.options.instantUpload&&e("REMOVE_ITEM",{query:n.id})})}),REQUEST_REVERT_ITEM_PROCESSING:pe(r,function(n){if(r.options.instantUpload){var o=function(l){l&&e("REVERT_ITEM_PROCESSING",{query:n})},a=t("GET_BEFORE_REMOVE_FILE");if(!a)return o(!0);var s=a(ue(n));return null==s?o(!0):"boolean"==typeof s?o(s):void("function"==typeof s.then&&s.then(o))}e("REVERT_ITEM_PROCESSING",{query:n})}),REVERT_ITEM_PROCESSING:pe(r,function(n){n.revert(Ke(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(function(){(r.options.instantUpload||function(e){return!Me(e.file)}(n))&&e("REMOVE_ITEM",{query:n.id})}).catch(function(){})}),SET_OPTIONS:function(o){var a=o.options,s=Object.keys(a),u=Fo.filter(function(c){return s.includes(c)});[].concat(lt(u),lt(Object.keys(a).filter(function(c){return!u.includes(c)}))).forEach(function(c){e("SET_"+ot(c,"_").toUpperCase(),{value:a[c]})})}}},Fo=["server"],_e=function(e){return document.createElement(e)},J=function(e,t){var r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},Qr=function(e,t,r,n){var o=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(o),y:t+r*Math.sin(o)}},Bo=function(e,t,r,n,o){var a=1;return o>n&&o-n<=.5&&(a=0),n>o&&n-o>=.5&&(a=0),function(e,t,r,n,o,a){var s=Qr(e,t,r,o),u=Qr(e,t,r,n);return["M",s.x,s.y,"A",r,r,0,a,0,u.x,u.y].join(" ")}(e,t,r,360*Math.min(.9999,n),360*Math.min(.9999,o),a)},Kr=ee({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(e){var t=e.root,r=e.props;r.spin=!1,r.progress=0,r.opacity=0;var n=ne("svg");t.ref.path=ne("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},write:function(e){var t=e.root,r=e.props;if(0!==r.opacity){r.align&&(t.element.dataset.align=r.align);var n=parseInt(K(t.ref.path,"stroke-width"),10),o=.5*t.rect.element.width,a=0,s=0;r.spin?(a=0,s=.5):(a=0,s=r.progress);var u=Bo(o,o,o-n,a,s);K(t.ref.path,"d",u),K(t.ref.path,"stroke-opacity",r.spin||r.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Zr=ee({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(e){var r=e.props;e.root.element.innerHTML=(r.icon||"")+"<span>"+r.label+"</span>",r.isDisabled=!1},write:function(e){var t=e.root,r=e.props,n=r.isDisabled,o=t.query("GET_DISABLED")||0===r.opacity;o&&!n?(r.isDisabled=!0,K(t.element,"disabled","disabled")):!o&&n&&(r.isDisabled=!1,t.element.removeAttribute("disabled"))}}),Jr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.labelBytes,a=void 0===o?"bytes":o,s=n.labelKilobytes,u=void 0===s?"KB":s,l=n.labelMegabytes,c=void 0===l?"MB":l,f=n.labelGigabytes,d=void 0===f?"GB":f,m=r*r,I=r*r*r;return(e=Math.round(Math.abs(e)))<r?e+" "+a:e<m?Math.floor(e/r)+" "+u:e<I?en(e/m,1,t)+" "+c:en(e/I,2,t)+" "+d},en=function(e,t,r){return e.toFixed(t).split(".").filter(function(n){return"0"!==n}).join(r)},zt=function(e){var t=e.root,r=e.props;J(t.ref.fileSize,Jr(t.query("GET_ITEM_SIZE",r.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),J(t.ref.fileName,t.query("GET_ITEM_NAME",r.id))},tn=function(e){var t=e.root,r=e.props;Be(t.query("GET_ITEM_SIZE",r.id))?zt({root:t,props:r}):J(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Ho=ee({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ae({DID_LOAD_ITEM:zt,DID_UPDATE_ITEM_META:zt,DID_THROW_ITEM_LOAD_ERROR:tn,DID_THROW_ITEM_INVALID:tn}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,r=e.props,n=_e("span");n.className="filepond--file-info-main",K(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;var o=_e("span");o.className="filepond--file-info-sub",t.appendChild(o),t.ref.fileSize=o,J(o,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),J(n,t.query("GET_ITEM_NAME",r.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),rn=function(e){return Math.round(100*e)},nn=function(e){var t=e.root,r=e.action,n=null===r.progress?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+rn(r.progress)+"%";J(t.ref.main,n),J(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},on=function(e){var t=e.root;J(t.ref.main,""),J(t.ref.sub,"")},Ze=function(e){var t=e.root,r=e.action;J(t.ref.main,r.status.main),J(t.ref.sub,r.status.sub)},$o=ee({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ae({DID_LOAD_ITEM:on,DID_REVERT_ITEM_PROCESSING:on,DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;J(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),J(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(e){var t=e.root;J(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),J(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root;J(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),J(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,r=e.action,n=null===r.progress?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+rn(r.progress)+"%";J(t.ref.main,n),J(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:nn,DID_THROW_ITEM_LOAD_ERROR:Ze,DID_THROW_ITEM_INVALID:Ze,DID_THROW_ITEM_PROCESSING_ERROR:Ze,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ze,DID_THROW_ITEM_REMOVE_ERROR:Ze}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,r=_e("span");r.className="filepond--file-status-main",t.appendChild(r),t.ref.main=r;var n=_e("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,nn({root:t,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Wt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},jt=[];k(Wt,function(i){jt.push(i)});var i,ce=function(e){if("right"===kt(e))return 0;var t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Qo=function(e){return e.ref.buttonAbortItemLoad.rect.element.width},Et=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},Ko=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},kt=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},ea={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},an={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ce},status:{translateX:ce}},Xt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},qe={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ce},status:{translateX:ce,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ce},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:kt},info:{translateX:ce},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:kt},buttonRemoveItem:{opacity:1},info:{translateX:ce},status:{opacity:1,translateX:ce}},DID_LOAD_ITEM:an,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ce},status:{translateX:ce}},DID_START_ITEM_PROCESSING:Xt,DID_REQUEST_ITEM_PROCESSING:Xt,DID_UPDATE_ITEM_PROCESS_PROGRESS:Xt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ce}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ce},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:an},ta=ee({create:function(e){var t=e.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),ia=ae({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){e.root.ref.buttonAbortItemProcessing.label=e.action.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){e.root.ref.buttonAbortItemLoad.label=e.action.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){e.root.ref.buttonAbortItemRemoval.label=e.action.value},DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var t=e.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=r.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=r.progress}}),oa=ee({create:function(e){var d,t=e.root,r=e.props,n=Object.keys(Wt).reduce(function(D,P){return D[P]=Object.assign({},Wt[P]),D},{}),o=r.id,a=t.query("GET_ALLOW_REVERT"),s=t.query("GET_ALLOW_REMOVE"),u=t.query("GET_ALLOW_PROCESS"),l=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),f=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");c?u&&!a?d=function(P){return!/RevertItemProcessing/.test(P)}:!u&&a?d=function(P){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(P)}:!u&&!a&&(d=function(P){return!/Process/.test(P)}):d=function(P){return!/Process/.test(P)};var E=d?jt.filter(d):jt.concat();if(l&&a&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!a){var m=qe.DID_COMPLETE_ITEM_PROCESSING;m.info.translateX=Ko,m.info.translateY=Et,m.status.translateY=Et,m.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!u&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(D){qe[D].status.translateY=Et}),qe.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Qo),f&&a){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var I=qe.DID_COMPLETE_ITEM_PROCESSING;I.info.translateX=ce,I.status.translateY=Et,I.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),k(n,function(D,P){var h=t.createChildView(Zr,{label:t.query(P.label),icon:t.query(P.icon),opacity:0});E.includes(D)&&t.appendChildView(h),P.disabled&&(h.element.setAttribute("disabled","disabled"),h.element.setAttribute("hidden","hidden")),h.element.dataset.align=t.query("GET_STYLE_"+P.align),h.element.classList.add(P.className),h.on("click",function(F){F.stopPropagation(),!P.disabled&&t.dispatch(P.action,{query:o})}),t.ref["button"+D]=h}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(ta)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(Ho,{id:o})),t.ref.status=t.appendChildView(t.createChildView($o,{id:o}));var v=t.appendChildView(t.createChildView(Kr,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));v.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=v;var _=t.appendChildView(t.createChildView(Kr,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));_.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=_,t.ref.activeStyles=[]},write:function(e){var t=e.root,r=e.actions;ia({root:t,actions:r,props:e.props});var o=r.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return qe[s.type]});if(o){t.ref.activeStyles=[];var a=qe[o.type];k(ea,function(s,u){var l=t.ref[s];k(u,function(c,f){t.ref.activeStyles.push({control:l,key:c,value:a[s]&&typeof a[s][c]<"u"?a[s][c]:f})})})}t.ref.activeStyles.forEach(function(s){var c=s.value;s.control[s.key]="function"==typeof c?c(t):c})},didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),ua=ee({create:function(e){var t=e.root,r=e.props;t.ref.fileName=_e("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(oa,{id:r.id})),t.ref.data=!1},ignoreRect:!0,write:ae({DID_LOAD_ITEM:function(e){var t=e.root;J(t.ref.fileName,t.query("GET_ITEM_NAME",e.props.id))}}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),sn={type:"spring",damping:.6,mass:7},ca=function(e,t,r){var n=ee({name:"panel-"+t.name+" filepond--"+r,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(o)},un=ee({name:"panel",read:function(e){return e.props.heightCurrent=e.root.ref.bottom.translateY},write:function(e){var t=e.root,r=e.props;if((null===t.ref.scalable||r.scalable!==t.ref.scalable)&&(t.ref.scalable=!vr(r.scalable)||r.scalable,t.element.dataset.scalable=t.ref.scalable),r.height){var n=t.ref.top.rect.element,o=t.ref.bottom.rect.element,a=Math.max(n.height+o.height,r.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(a-n.height-o.height)/100,t.ref.bottom.translateY=a-o.height}},create:function(e){var t=e.root,r=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:sn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:sn},styles:["translateY"]}}].forEach(function(n){ca(t,n,r.name)}),t.element.classList.add("filepond--"+r.name),t.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),ln={type:"spring",stiffness:.75,damping:.45,mass:10},fn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},va=ae({DID_UPDATE_PANEL_HEIGHT:function(e){e.root.height=e.action.height}}),Ea=ae({DID_GRAB_ITEM:function(e){var t=e.root;e.props.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:function(e){e.root.element.dataset.dragState="drag"},DID_DROP_ITEM:function(e){var t=e.root,r=e.props;r.dragOffset=null,r.dragOrigin=null,t.element.dataset.dragState="drop"}},function(i){var e=i.root,t=i.actions,r=i.props,n=i.shouldOptimize;"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");var o=t.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return fn[s.type]});o&&o.type!==r.currentState&&(r.currentState=o.type,e.element.dataset.filepondItemState=fn[r.currentState]||"");var a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?n||(e.height=e.rect.element.width*a):(va({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),ga=ee({create:function(e){var t=e.root,r=e.props;if(t.ref.handleClick=function(o){return t.dispatch("DID_ACTIVATE_ITEM",{id:r.id})},t.element.id="filepond--item-"+r.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(ua,{id:r.id})),t.ref.panel=t.appendChildView(t.createChildView(un,{name:"item-panel"})),t.ref.panel.height=null,r.markedForRemoval=!1,t.query("GET_ALLOW_REORDER")){t.element.dataset.dragState="idle";t.element.addEventListener("pointerdown",function(a){if(a.isPrimary){var s=!1,u={x:a.pageX,y:a.pageY};r.dragOrigin={x:t.translateX,y:t.translateY},r.dragCenter={x:a.offsetX,y:a.offsetY};var l=function(e){var t=e.map(function(n){return n.id}),r=void 0;return{setIndex:function(o){r=o},getIndex:function(){return r},getItemIndex:function(o){return t.indexOf(o.id)}}}(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:r.id,dragState:l});var c=function(I){I.isPrimary&&(I.stopPropagation(),I.preventDefault(),r.dragOffset={x:I.pageX-u.x,y:I.pageY-u.y},r.dragOffset.x*r.dragOffset.x+r.dragOffset.y*r.dragOffset.y>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:r.id,dragState:l}))},f=function(I){I.isPrimary&&(r.dragOffset={x:I.pageX-u.x,y:I.pageY-u.y},E())},d=function(){E()},E=function(){document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",f),t.dispatch("DID_DROP_ITEM",{id:r.id,dragState:l}),s&&setTimeout(function(){return t.element.addEventListener("click",t.ref.handleClick)},0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",c),document.addEventListener("pointerup",f)}})}},write:Ea,destroy:function(e){var t=e.root,r=e.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:r.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:ln,translateY:ln,opacity:{type:"tween",duration:150}}}}),$t=function(i,e){return Math.max(1,Math.floor((i+1)/e))},Qt=function(e,t,r){if(r){var o=t.length,a=null;if(0===o||r.top<t[0].rect.element.top)return-1;var u=t[0].rect.element,c=u.width+(u.marginLeft+u.marginRight),f=$t(e.rect.element.width,c);if(1===f){for(var d=0;d<o;d++){var E=t[d];if(r.top<E.rect.outer.top+.5*E.rect.element.height)return d}return o}for(var v=u.height+(u.marginTop+u.marginBottom),_=0;_<o;_++){var D=_%f,F=Math.floor(_/f)*v;if(r.top<F+v+u.marginBottom&&r.top>F-u.marginTop){if(r.left<D*c+c)return _;a=_!==o-1?_:null}}return null!==a?a:o}},gt={height:0,width:0,get getHeight(){return this.height},set setHeight(i){(0===this.height||0===i)&&(this.height=i)},get getWidth(){return this.width},set setWidth(i){(0===this.width||0===i)&&(this.width=i)},setDimensions:function(e,t){(0===this.height||0===e)&&(this.height=e),(0===this.width||0===t)&&(this.width=t)}},dn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&Ta(e,t,r,n,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},Ta=function(e,t,r,n,o){e.interactionMethod===fe_NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===fe_DROP?(e.translateX=null,e.translateX=t-20*n,e.translateY=null,e.translateY=r-10*o,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===fe_BROWSE?(e.translateY=null,e.translateY=r-30):e.interactionMethod===fe_API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Kt=function(e){return e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop},Oa=ae({DID_ADD_ITEM:function(e){var t=e.root,r=e.action,n=r.id,o=r.index,a=r.interactionMethod;t.ref.addIndex=o;var s=Date.now(),u=s,l=1;if(a!==fe_NONE){l=0;var c=t.query("GET_ITEM_INSERT_INTERVAL"),f=s-t.ref.lastItemSpanwDate;u=f<c?s+(c-f):s}t.ref.lastItemSpanwDate=u,t.appendChildView(t.createChildView(ga,{spawnDate:u,id:n,opacity:l,interactionMethod:a}),o)},DID_REMOVE_ITEM:function(e){var n=e.action.id,o=e.root.childViews.find(function(a){return a.id===n});o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)},DID_DRAG_ITEM:function(e){var t=e.root,r=e.action,n=r.id,o=r.dragState,a=t.query("GET_ITEM",{id:n}),s=t.childViews.find(function(D){return D.id===n}),u=t.childViews.length,l=o.getItemIndex(a);if(s){var c={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},f=Kt(s),d=function(e){return e.rect.element.width+.5*e.rect.element.marginLeft+.5*e.rect.element.marginRight}(s),E=Math.floor(t.rect.outer.width/d);E>u&&(E=u);var m=Math.floor(u/E+1);gt.setHeight=f*m,gt.setWidth=d*E;var I={y:Math.floor(c.y/f),x:Math.floor(c.x/d),getGridIndex:function(){return c.y>gt.getHeight||c.y<0||c.x>gt.getWidth||c.x<0?l:this.y*E+this.x},getColIndex:function(){for(var P=t.query("GET_ACTIVE_ITEMS"),h=t.childViews.filter(function(L){return L.rect.element.height}),F=P.map(function(L){return h.find(function(W){return W.id===L.id})}),R=F.findIndex(function(L){return L===s}),H=Kt(s),z=F.length,y=z,A=0,w=0,O=0,S=0;S<z;S++)if(A=Kt(F[S]),c.y<(w=(O=w)+A)){if(R>S){if(c.y<O+H){y=S;break}continue}y=S;break}return y}},v=E>1?I.getGridIndex():I.getColIndex();t.dispatch("MOVE_ITEM",{query:s,index:v});var _=o.getIndex();if(void 0===_||_!==v){if(o.setIndex(v),void 0===_)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:l,target:v})}}}}),Sa=ee({create:function(e){var t=e.root;K(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},write:function(e){var t=e.root,r=e.props,o=e.shouldOptimize;Oa({root:t,props:r,actions:e.actions});var a=r.dragCoordinates,s=t.rect.element.width,u=t.childViews.filter(function(y){return y.rect.element.height}),l=t.query("GET_ACTIVE_ITEMS").map(function(y){return u.find(function(A){return A.id===y.id})}).filter(function(y){return y}),c=a?Qt(t,l,a):null,f=t.ref.addIndex||null;t.ref.addIndex=null;var d=0,E=0,m=0;if(0!==l.length){var I=l[0].rect.element,v=I.marginTop+I.marginBottom,D=I.width+(I.marginLeft+I.marginRight),P=I.height+v,h=$t(s,D);if(1===h){var F=0,R=0;l.forEach(function(y,A){if(c){var w=A-c;R=-2===w?.25*-v:-1===w?.75*-v:0===w?.75*v:1===w?.25*v:0}o&&(y.translateX=null,y.translateY=null),y.markedForRemoval||dn(y,0,F+R),F+=(y.rect.element.height+v)*(y.markedForRemoval?y.opacity:1)})}else{var H=0,z=0;l.forEach(function(y,A){A===c&&(d=1),A===f&&(m+=1),y.markedForRemoval&&y.opacity<.5&&(E-=1);var w=A+m+d+E,O=w%h,S=Math.floor(w/h),L=O*D,W=S*P,Y=Math.sign(L-H),M=Math.sign(W-z);H=L,z=W,!y.markedForRemoval&&(o&&(y.translateX=null,y.translateY=null),dn(y,L,W,Y,M))})}}},tag:"ul",name:"list",didWriteView:function(e){var t=e.root;t.childViews.filter(function(r){return r.markedForRemoval&&0===r.opacity&&r.resting}).forEach(function(r){r._destroy(),t.removeChildView(r)})},filterFrameActionsForChild:function(e,t){return t.filter(function(r){return!r.data||!r.data.id||e.id===r.data.id})},mixins:{apis:["dragCoordinates"]}}),wa=ae({DID_DRAG:function(e){var t=e.root,r=e.props,n=e.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(r.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},DID_END_DRAG:function(e){e.props.dragCoordinates=null}}),Ma=ee({create:function(e){var t=e.root,r=e.props;t.ref.list=t.appendChildView(t.createChildView(Sa)),r.dragCoordinates=null,r.overflowing=!1},write:function(e){var t=e.root,r=e.props;if(wa({root:t,props:r,actions:e.actions}),t.ref.list.dragCoordinates=r.dragCoordinates,r.overflowing&&!r.overflow&&(r.overflowing=!1,t.element.dataset.state="",t.height=null),r.overflow){var o=Math.round(r.overflow);o!==t.height&&(r.overflowing=!0,t.element.dataset.state="overflow",t.height=o)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ge=function(e,t,r){r?K(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:""):e.removeAttribute(t)},pn=function(e){var t=e.root,r=e.action;t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ge(t.element,"accept",!!r.value,r.value?r.value.join(","):"")},vn=function(e){ge(e.root.element,"multiple",e.action.value)},En=function(e){ge(e.root.element,"webkitdirectory",e.action.value)},Zt=function(e){var t=e.root,r=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE");ge(t.element,"disabled",r||!n)},gn=function(e){var t=e.root;e.action.value?0===t.query("GET_TOTAL_ITEMS")&&ge(t.element,"required",!0):ge(t.element,"required",!1)},mn=function(e){var r=e.action;ge(e.root.element,"capture",!!r.value,!0===r.value?"":r.value)},In=function(e){var t=e.root,r=t.element;if(t.query("GET_TOTAL_ITEMS")>0){ge(r,"required",!1),ge(r,"name",!1);for(var n=t.query("GET_ACTIVE_ITEMS"),o=!1,a=0;a<n.length;a++)n[a].status===C.LOAD_ERROR&&(o=!0);t.element.setCustomValidity(o?t.query("GET_LABEL_INVALID_FIELD"):"")}else ge(r,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&r.setCustomValidity(""),t.query("GET_REQUIRED")&&ge(r,"required",!0)},Ga=ee({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(e){var t=e.root,r=e.props;t.element.id="filepond--browser-"+r.id,K(t.element,"name",t.query("GET_NAME")),K(t.element,"aria-controls","filepond--assistant-"+r.id),K(t.element,"aria-labelledby","filepond--drop-label-"+r.id),pn({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),vn({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),En({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Zt({root:t}),gn({root:t,action:{value:t.query("GET_REQUIRED")}}),mn({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=function(n){if(t.element.value){var o=Array.from(t.element.files).map(function(a){return a._relativePath=a.webkitRelativePath,a});setTimeout(function(){r.onload(o),function(e){if(e&&""!==e.value){try{e.value=""}catch{}if(e.value){var t=_e("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}}(t.element)},250)}},t.element.addEventListener("change",t.ref.handleChange)},destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange)},write:ae({DID_LOAD_ITEM:In,DID_REMOVE_ITEM:In,DID_THROW_ITEM_INVALID:function(e){var t=e.root;t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Zt,DID_SET_ALLOW_BROWSE:Zt,DID_SET_ALLOW_DIRECTORIES_ONLY:En,DID_SET_ALLOW_MULTIPLE:vn,DID_SET_ACCEPTED_FILE_TYPES:pn,DID_SET_CAPTURE_METHOD:mn,DID_SET_REQUIRED:gn})}),Tn_ENTER=13,Tn_SPACE=32,_n=function(e,t){e.innerHTML=t;var r=e.querySelector(".filepond--label-action");return r&&K(r,"tabindex","0"),t},Ua=ee({name:"drop-label",ignoreRect:!0,create:function(e){var t=e.root,r=e.props,n=_e("label");K(n,"for","filepond--browser-"+r.id),K(n,"id","filepond--drop-label-"+r.id),t.ref.handleKeyDown=function(o){(o.keyCode===Tn_ENTER||o.keyCode===Tn_SPACE)&&(o.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(o){o.target===n||n.contains(o.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),_n(n,r.caption),t.appendChild(n),t.ref.label=n},destroy:function(e){var t=e.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:ae({DID_SET_LABEL_IDLE:function(e){_n(e.root.ref.label,e.action.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Va=ee({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Wa=ae({DID_DRAG:function(e){var t=e.root,r=e.action;t.ref.blob?(t.ref.blob.translateX=r.position.scopeLeft,t.ref.blob.translateY=r.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1):function(e){var t=e.root;t.ref.blob=t.appendChildView(t.createChildView(Va,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:.5*t.rect.element.width,translateY:.5*t.rect.element.height}))}({root:t})},DID_DROP:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},DID_END_DRAG:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.opacity=0)}}),ja=ee({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(e){var t=e.root,n=e.actions;Wa({root:t,props:e.props,actions:n});var o=t.ref.blob;0===n.length&&o&&0===o.opacity&&(t.removeChildView(o),t.ref.blob=null)}}),hn=function(e,t){try{var r=new DataTransfer;t.forEach(function(n){n instanceof File?r.items.add(n):r.items.add(new File([n],n.name,{type:n.type}))}),e.files=r.files}catch{return!1}return!0},mt=function(e,t){return e.ref.fields[t]},Jt=function(e){e.query("GET_ACTIVE_ITEMS").forEach(function(t){e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Rn=function(e){return Jt(e.root)},es=ae({DID_SET_DISABLED:function(e){var t=e.root;t.element.disabled=t.query("GET_DISABLED")},DID_ADD_ITEM:function(e){var t=e.root,r=e.action,a=!(t.query("GET_ITEM",r.id).origin===te.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),s=_e("input");s.type=a?"file":"hidden",s.name=t.query("GET_NAME"),t.ref.fields[r.id]=s,Jt(t)},DID_LOAD_ITEM:function(e){var t=e.root,r=e.action,n=mt(t,r.id);if(n&&(null!==r.serverFileReference&&(n.value=r.serverFileReference),t.query("SHOULD_UPDATE_FILE_INPUT"))){var o=t.query("GET_ITEM",r.id);hn(n,[o.file])}},DID_REMOVE_ITEM:function(e){var t=e.root,r=e.action,n=mt(t,r.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[r.id])},DID_DEFINE_VALUE:function(e){var t=e.root,r=e.action,n=mt(t,r.id);n&&(null===r.value?n.removeAttribute("value"):"file"!=n.type&&(n.value=r.value),Jt(t))},DID_PREPARE_OUTPUT:function(e){var t=e.root,r=e.action;t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(function(){var n=mt(t,r.id);n&&hn(n,[r.file])},0)},DID_REORDER_ITEMS:Rn,DID_SORT_ITEMS:Rn}),ts=ee({tag:"fieldset",name:"data",create:function(e){var t=e.root;t.ref.fields={};var r=document.createElement("legend");r.textContent="Files",t.element.appendChild(r)},write:es,ignoreRect:!0}),ns=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],is=["css","csv","html","txt"],os={zip:"zip|compressed",epub:"application/epub+zip"},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.toLowerCase(),ns.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):is.includes(e)?"text/"+e:os[e]||""},er=function(e){return new Promise(function(t,r){var n=ps(e);if(n.length&&!as(e))return t(n);ss(e).then(t)})},as=function(e){return!!e.files&&e.files.length>0},ss=function(e){return new Promise(function(t,r){var n=(e.items?Array.from(e.items):[]).filter(function(o){return us(o)}).map(function(o){return ls(o)});n.length?Promise.all(n).then(function(o){var a=[];o.forEach(function(s){a.push.apply(a,s)}),t(a.filter(function(s){return s}).map(function(s){return s._relativePath||(s._relativePath=s.webkitRelativePath),s}))}).catch(console.error):t(e.files?Array.from(e.files):[])})},us=function(e){if(yn(e)){var t=tr(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},ls=function(e){return new Promise(function(t,r){ds(e)?cs(tr(e)).then(t).catch(r):t([e.getAsFile()])})},cs=function(e){return new Promise(function(t,r){var n=[],o=0,a=0,s=function(){0===a&&0===o&&t(n)};!function l(c){o++;var f=c.createReader();!function E(){f.readEntries(function(m){if(0===m.length)return o--,void s();m.forEach(function(I){I.isDirectory?l(I):(a++,I.file(function(v){var _=fs(v);I.fullPath&&(_._relativePath=I.fullPath),n.push(_),a--,s()}))}),E()},r)}()}(e)})},fs=function(e){if(e.type.length)return e;var t=e.lastModifiedDate,r=e.name,n=On(pt(e.name));return n.length&&((e=e.slice(0,e.size,n)).name=r,e.lastModifiedDate=t),e},ds=function(e){return yn(e)&&(tr(e)||{}).isDirectory},yn=function(e){return"webkitGetAsEntry"in e},tr=function(e){return e.webkitGetAsEntry()},ps=function(e){var t=[];try{if((t=Es(e)).length)return t;t=vs(e)}catch{}return t},vs=function(e){var t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},Es=function(e){var t=e.getData("text/html");if("string"==typeof t&&t.length){var r=t.match(/src\s*=\s*"(.+?)"/);if(r)return[r[1]]}return[]},It=[],Ce=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},ms=function(e){var t=It.find(function(n){return n.element===e});if(t)return t;var r=Is(e);return It.push(r),r},Is=function(e){var t=[],r={dragenter:_s,dragover:hs,dragleave:Os,drop:Rs},n={};k(r,function(a,s){n[a]=s(e,t),e.addEventListener(a,n[a],!1)});var o={element:e,addListener:function(s){return t.push(s),function(){t.splice(t.indexOf(s),1),0===t.length&&(It.splice(It.indexOf(o),1),k(r,function(u){e.removeEventListener(u,n[u],!1)}))}}};return o},rr=function(e,t){var r=function(e){return"getRootNode"in e?e.getRootNode():document}(t),n=function(e,t){return"elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)}(r,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)},Dn=null,Tt=function(e,t){try{e.dropEffect=t}catch{}},_s=function(e,t){return function(r){r.preventDefault(),Dn=r.target,t.forEach(function(n){var a=n.onenter;rr(r,n.element)&&(n.state="enter",a(Ce(r)))})}},hs=function(e,t){return function(r){r.preventDefault();var n=r.dataTransfer;er(n).then(function(o){var a=!1;t.some(function(s){var u=s.filterElement,l=s.element,c=s.onenter,f=s.onexit,d=s.ondrag,E=s.allowdrop;Tt(n,"copy");var m=E(o);if(m)if(rr(r,l)){if(a=!0,null===s.state)return s.state="enter",void c(Ce(r));if(s.state="over",u&&!m)return void Tt(n,"none");d(Ce(r))}else u&&!a&&Tt(n,"none"),s.state&&(s.state=null,f(Ce(r)));else Tt(n,"none")})})}},Rs=function(e,t){return function(r){r.preventDefault(),er(r.dataTransfer).then(function(o){t.forEach(function(a){var s=a.filterElement,u=a.element,l=a.ondrop,c=a.onexit,f=a.allowdrop;if(a.state=null,!s||rr(r,u)){if(!f(o))return c(Ce(r));l(Ce(r),o)}})})}},Os=function(e,t){return function(r){Dn===r.target&&t.forEach(function(n){var o=n.onexit;n.state=null,o(Ce(r))})}},ys=function(e,t,r){e.classList.add("filepond--hopper");var a=r.filterItems,s=void 0===a?function(d){return d}:a,u=function(e,t,r){var n=ms(t),o={element:e,filterElement:r,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return o.destroy=n.addListener(o),o}(e,r.catchesDropsOnPage?document.documentElement:e,r.requiresDropOnElement),l="",c="";u.allowdrop=function(d){return t(s(d))},u.ondrop=function(d,E){var m=s(E);t(m)?(c="drag-drop",f.onload(m,d)):f.ondragend(d)},u.ondrag=function(d){f.ondrag(d)},u.onenter=function(d){c="drag-over",f.ondragstart(d)},u.onexit=function(d){c="drag-exit",f.ondragend(d)};var f={updateHopperState:function(){l!==c&&(e.dataset.hopperState=c,l=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){u.destroy()}};return f},nr=!1,Ye=[],Sn=function(e){var t=document.activeElement;if(t&&(/textarea|input/i.test(t.nodeName)||"true"===t.getAttribute("contenteditable"))){for(var n=!1,o=t;o!==document.body;){if(o.classList.contains("filepond--root")){n=!0;break}o=o.parentNode}if(!n)return}er(e.clipboardData).then(function(a){a.length&&Ye.forEach(function(s){return s(a)})})},bs=function(){var e=function(n){t.onload(n)},t={destroy:function(){!function(e){Gt(Ye,Ye.indexOf(e)),0===Ye.length&&(document.removeEventListener("paste",Sn),nr=!1)}(e)},onload:function(){}};return function(e){Ye.includes(e)||(Ye.push(e),!nr&&(nr=!0,document.addEventListener("paste",Sn)))}(e),t},bn=null,Pn=null,ir=[],_t=function(e,t){e.element.textContent=t},An=function(e,t,r){var n=e.query("GET_TOTAL_ITEMS");_t(e,r+" "+t+", "+n+" "+e.query(1===n?"GET_LABEL_FILE_COUNT_SINGULAR":"GET_LABEL_FILE_COUNT_PLURAL")),clearTimeout(Pn),Pn=setTimeout(function(){!function(e){e.element.textContent=""}(e)},1500)},wn=function(e){return e.element.parentNode.contains(document.activeElement)},Ln=function(e){var t=e.root,o=t.query("GET_ITEM",e.action.id).filename,a=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");_t(t,o+" "+a)},ht=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id);_t(t,r.status.main+" "+n.filename+" "+r.status.sub)},Cs=ee({create:function(e){var t=e.root;t.element.id="filepond--assistant-"+e.props.id,K(t.element,"role","alert"),K(t.element,"aria-live","polite"),K(t.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:ae({DID_LOAD_ITEM:function(e){var t=e.root,r=e.action;if(wn(t)){t.element.textContent="";var n=t.query("GET_ITEM",r.id);ir.push(n.filename),clearTimeout(bn),bn=setTimeout(function(){An(t,ir.join(", "),t.query("GET_LABEL_FILE_ADDED")),ir.length=0},750)}},DID_REMOVE_ITEM:function(e){var t=e.root,r=e.action;wn(t)&&An(t,r.item.filename,t.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root,o=t.query("GET_ITEM",e.action.id).filename,a=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");_t(t,o+" "+a)},DID_ABORT_ITEM_PROCESSING:Ln,DID_REVERT_ITEM_PROCESSING:Ln,DID_THROW_ITEM_REMOVE_ERROR:ht,DID_THROW_ITEM_LOAD_ERROR:ht,DID_THROW_ITEM_INVALID:ht,DID_THROW_ITEM_PROCESSING_ERROR:ht}),tag:"span",name:"assistant"}),Mn=function(e){return e.replace(new RegExp((arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-")+".","g"),function(r){return r.charAt(1).toUpperCase()})},Cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Date.now(),o=null;return function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];clearTimeout(o);var l=Date.now()-n,c=function(){n=Date.now(),e.apply(void 0,s)};l<t?r||(o=setTimeout(c,t-l)):c()}},Rt=function(e){return e.preventDefault()},Bs=function(e){var t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Us=function(e){var t=0,r=0,n=e.ref.list,o=n.childViews[0],a=o.childViews.filter(function(P){return P.rect.element.height}),s=e.query("GET_ACTIVE_ITEMS").map(function(P){return a.find(function(h){return h.id===P.id})}).filter(function(P){return P});if(0===s.length)return{visual:t,bounds:r};var u=o.rect.element.width,l=Qt(o,s,n.dragCoordinates),c=s[0].rect.element,f=c.marginTop+c.marginBottom,E=c.width+(c.marginLeft+c.marginRight),m=c.height+f,I=typeof l<"u"&&l>=0?1:0,v=s.find(function(P){return P.markedForRemoval&&P.opacity<.45})?-1:0,_=s.length+I+v,D=$t(u,E);return 1===D?s.forEach(function(P){var h=P.rect.element.height+f;r+=h,t+=h*P.opacity}):(r=Math.ceil(_/D)*m,t=r),{visual:t,bounds:r}},Vs=function(e){var t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},or=function(e,t){var r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS"),a=e.query("GET_MAX_FILES"),s=t.length;return!n&&s>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Z("warning",0,"Max files")}),!0):!(!n&&r||!(Be(a=n?a:1)&&o+s>a)||(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Z("warning",0,"Max files")}),0))},xs=function(e,t,r){var n=e.childViews[0];return Qt(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Nn=function(e){var t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){var o=ys(e.element,function(a){var s=e.query("GET_BEFORE_DROP_FILE")||function(){return!0};return!e.query("GET_DROP_VALIDATION")||a.every(function(l){return Pe("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(function(c){return!0===c})&&s(l)})},{filterItems:function(s){var u=e.query("GET_IGNORED_FILES");return s.filter(function(l){return!Me(l)||!u.includes(l.name.toLowerCase())})},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=function(a,s){var l=e.ref.list.childViews[0].childViews.filter(function(f){return f.rect.element.height}),c=e.query("GET_ACTIVE_ITEMS").map(function(f){return l.find(function(d){return d.id===f.id})}).filter(function(f){return f});ve("ADD_ITEMS",a,{dispatch:e.dispatch}).then(function(f){if(or(e,f))return!1;e.dispatch("ADD_ITEMS",{items:f,index:xs(e.ref.list,c,s),interactionMethod:fe_DROP})}),e.dispatch("DID_DROP",{position:s}),e.dispatch("DID_END_DRAG",{position:s})},o.ondragstart=function(a){e.dispatch("DID_START_DRAG",{position:a})},o.ondrag=Cn(function(a){e.dispatch("DID_DRAG",{position:a})}),o.ondragend=function(a){e.dispatch("DID_END_DRAG",{position:a})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(ja))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Fn=function(e,t){var r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),o=r&&!n;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ga,Object.assign({},t,{onload:function(s){ve("ADD_ITEMS",s,{dispatch:e.dispatch}).then(function(u){if(or(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:-1,interactionMethod:fe_BROWSE})})}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Gn=function(e){var t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=bs(),e.ref.paster.onload=function(o){ve("ADD_ITEMS",o,{dispatch:e.dispatch}).then(function(a){if(or(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:fe_PASTE})})}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},qs=ae({DID_SET_ALLOW_BROWSE:function(e){Fn(e.root,e.props)},DID_SET_ALLOW_DROP:function(e){Nn(e.root)},DID_SET_ALLOW_PASTE:function(e){Gn(e.root)},DID_SET_DISABLED:function(e){var t=e.root,r=e.props;Nn(t),Gn(t),Fn(t,r),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Ys=ee({name:"root",read:function(e){var t=e.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:function(e){var t=e.root,r=e.props,n=t.query("GET_ID");n&&(t.element.id=n);var o=t.query("GET_CLASS_NAME");o&&o.split(" ").filter(function(f){return f.length}).forEach(function(f){t.element.classList.add(f)}),t.ref.label=t.appendChildView(t.createChildView(Ua,Object.assign({},r,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(Ma,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(un,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Cs,Object.assign({},r))),t.ref.data=t.appendChildView(t.createChildView(ts,Object.assign({},r))),t.ref.measure=_e("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(function(f){return!Te(f.value)}).map(function(f){t.element.dataset[f.name]=f.value}),t.ref.widthPrevious=null,t.ref.widthUpdated=Cn(function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];var a=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&s&&!a&&(t.element.addEventListener("touchmove",Rt,{passive:!1}),t.element.addEventListener("gesturestart",Rt));var u=t.query("GET_CREDITS");if(2===u.length){var c=document.createElement("a");c.className="filepond--credits",c.href=u[0],c.tabIndex=-1,c.target="_blank",c.rel="noopener noreferrer nofollow",c.textContent=u[1],t.element.appendChild(c),t.ref.credits=c}},write:function(e){var t=e.root,n=e.actions;if(qs({root:t,props:e.props,actions:n}),n.filter(function(q){return/^DID_SET_STYLE_/.test(q.type)}).filter(function(q){return!Te(q.data.value)}).map(function(q){var Q=q.data,He=Mn(q.type.substring(8).toLowerCase(),"_");t.element.dataset[He]=Q.value,t.invalidateLayout()}),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var o=t.ref.bounds;o||(o=t.ref.bounds=Vs(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var a=t.ref,s=a.hopper,u=a.label,l=a.list,c=a.panel;s&&s.updateHopperState();var f=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),E=t.query("GET_TOTAL_ITEMS"),I=E===(d?t.query("GET_MAX_FILES")||1e6:1),v=n.find(function(q){return"DID_ADD_ITEM"===q.type});if(I&&v){var _=v.data.interactionMethod;u.opacity=0,d?u.translateY=-40:_===fe_API?u.translateX=40:u.translateY=_===fe_BROWSE?40:30}else I||(u.opacity=1,u.translateX=0,u.translateY=0);var D=Bs(t),P=Us(t),h=u.rect.element.height,F=!d||I?0:h,R=I?l.rect.element.marginTop:0,H=0===E?0:l.rect.element.marginBottom,z=F+R+P.visual+H,y=F+R+P.bounds+H;if(l.translateY=Math.max(0,F-l.rect.element.marginTop)-D.top,f){var A=t.rect.element.width,w=A*f;f!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=f,t.ref.updateHistory=[]);var O=t.ref.updateHistory;O.push(A);if(O.length>4)for(var L=O.length,W=L-10,Y=0,M=L;M>=W;M--)if(O[M]===O[M-2]&&Y++,Y>=2)return;c.scalable=!1,c.height=w;var T=w-F-(H-D.bottom)-(I?R:0);l.overflow=P.visual>T?T:null,t.height=w}else if(o.fixedHeight){c.scalable=!1;var p=o.fixedHeight-F-(H-D.bottom)-(I?R:0);l.overflow=P.visual>p?p:null}else if(o.cappedHeight){var b=z>=o.cappedHeight,N=Math.min(o.cappedHeight,z);c.scalable=!0,c.height=b?N:N-D.top-D.bottom;var G=N-F-(H-D.bottom)-(I?R:0);l.overflow=z>o.cappedHeight&&P.visual>G?G:null,t.height=Math.min(o.cappedHeight,y-D.top-D.bottom)}else{var U=E>0?D.top+D.bottom:0;c.scalable=!0,c.height=Math.max(h,z-U),t.height=Math.max(h,y-U)}t.ref.credits&&c.heightCurrent&&(t.ref.credits.style.transform="translateY("+c.heightCurrent+"px)")}},destroy:function(e){var t=e.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Rt),t.element.removeEventListener("gesturestart",Rt)},mixins:{styles:["height"]}}),Hs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,r=ft(),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Object.assign({},e),o=[],a=[],c=function(v,_,D){!D||document.hidden?(m[v]&&m[v](_),o.push({type:v,data:_})):a.push({type:v,data:_})},f=function(v){for(var _,D=arguments.length,P=new Array(D>1?D-1:0),h=1;h<D;h++)P[h-1]=arguments[h];return E[v]?(_=E)[v].apply(_,P):null},d={getState:function(){return Object.assign({},n)},processActionQueue:function(){var v=[].concat(o);return o.length=0,v},processDispatchQueue:function(){var v=[].concat(a);a.length=0,v.forEach(function(_){c(_.type,_.data)})},dispatch:c,query:f},E={};t.forEach(function(I){E=Object.assign({},I(n),{},E)});var m={};return r.forEach(function(I){m=Object.assign({},I(c,f,n),{},m)}),d}(function(e){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Di(e)}}(r),[so,Ai(r)],[No,Pi(r)]);n.dispatch("SET_OPTIONS",{options:e});var o=function(){document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",o);var a=null,s=!1,u=!1,l=null,c=null,f=function(){s||(s=!0),clearTimeout(a),a=setTimeout(function(){s=!1,l=null,c=null,u&&(u=!1,n.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",f);var d=Ys(n,{id:Pt()}),E=!1,m=!1,I={_read:function(){s&&(c=window.innerWidth,l||(l=c),!u&&c!==l&&(n.dispatch("DID_START_RESIZE"),u=!0)),m&&E&&(E=null===d.element.offsetParent),!E&&(d._read(),m=d.rect.element.hidden)},_write:function(T){var p=n.processActionQueue().filter(function(b){return!/^SET_/.test(b.type)});E&&!p.length||(P(p),E=d._write(T,p,u),function(e){e.forEach(function(t,r){t.released&&Gt(e,r)})}(n.query("GET_ITEMS")),E&&n.processDispatchQueue())}},v=function(T){return function(p){var b={type:T};if(!p)return b;if(p.hasOwnProperty("error")&&(b.error=p.error?Object.assign({},p.error):null),p.status&&(b.status=Object.assign({},p.status)),p.file&&(b.output=p.file),p.source)b.file=p.source;else if(p.item||p.id){var N=p.item?p.item:n.query("GET_ITEM",p.id);b.file=N?ue(N):null}return p.items&&(b.items=p.items.map(ue)),/progress/.test(T)&&(b.progress=p.progress),p.hasOwnProperty("origin")&&p.hasOwnProperty("target")&&(b.origin=p.origin,b.target=p.target),b}},_={DID_DESTROY:v("destroy"),DID_INIT:v("init"),DID_THROW_MAX_FILES:v("warning"),DID_INIT_ITEM:v("initfile"),DID_START_ITEM_LOAD:v("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:v("addfileprogress"),DID_LOAD_ITEM:v("addfile"),DID_THROW_ITEM_INVALID:[v("error"),v("addfile")],DID_THROW_ITEM_LOAD_ERROR:[v("error"),v("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[v("error"),v("removefile")],DID_PREPARE_OUTPUT:v("preparefile"),DID_START_ITEM_PROCESSING:v("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:v("processfileprogress"),DID_ABORT_ITEM_PROCESSING:v("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:v("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:v("processfiles"),DID_REVERT_ITEM_PROCESSING:v("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[v("error"),v("processfile")],DID_REMOVE_ITEM:v("removefile"),DID_UPDATE_ITEMS:v("updatefiles"),DID_ACTIVATE_ITEM:v("activatefile"),DID_REORDER_ITEMS:v("reorderfiles")},D=function(T){var p=Object.assign({pond:Y},T);delete p.type,d.element.dispatchEvent(new CustomEvent("FilePond:"+T.type,{detail:p,bubbles:!0,cancelable:!0,composed:!0}));var b=[];T.hasOwnProperty("error")&&b.push(T.error),T.hasOwnProperty("file")&&b.push(T.file);var N=["type","error","file"];Object.keys(T).filter(function(U){return!N.includes(U)}).forEach(function(U){return b.push(T[U])}),Y.fire.apply(Y,[T.type].concat(b));var G=n.query("GET_ON"+T.type.toUpperCase());G&&G.apply(void 0,b)},P=function(T){T.length&&T.filter(function(p){return _[p.type]}).forEach(function(p){var b=_[p.type];(Array.isArray(b)?b:[b]).forEach(function(N){"DID_INIT_ITEM"===p.type?D(N(p.data)):setTimeout(function(){D(N(p.data))},0)})})},R=function(T){return new Promise(function(p,b){n.dispatch("REQUEST_ITEM_PREPARE",{query:T,success:function(G){p(G)},failure:function(G){b(G)}})})},y=function(T,p){return"object"==typeof T&&!function(T){return T.file&&T.id}(T)&&!p&&(p=T,T=void 0),n.dispatch("REMOVE_ITEM",Object.assign({},p,{query:T})),null===n.query("GET_ACTIVE_ITEM",T)},A=function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];return new Promise(function(N,G){var U=[],q={};if(rt(p[0]))U.push.apply(U,p[0]),Object.assign(q,p[1]||{});else{var X=p[p.length-1];"object"==typeof X&&!(X instanceof Blob)&&Object.assign(q,p.pop()),U.push.apply(U,p)}n.dispatch("ADD_ITEMS",{items:U,index:q.index,interactionMethod:fe_API,success:N,failure:G})})},w=function(){return n.query("GET_ACTIVE_ITEMS")},O=function(T){return new Promise(function(p,b){n.dispatch("REQUEST_ITEM_PROCESSING",{query:T,success:function(G){p(G)},failure:function(G){b(G)}})})},Y=Object.assign({},ct(),{},I,{},function(e,t){var r={};return k(t,function(n){r[n]={get:function(){return e.getState().options[n]},set:function(a){e.dispatch("SET_"+ot(n,"_").toUpperCase(),{value:a})}}}),r}(n,r),{setOptions:function(T){return n.dispatch("SET_OPTIONS",{options:T})},addFile:function(T){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(b,N){A([{source:T,options:p}],{index:p.index}).then(function(G){return b(G&&G[0])}).catch(N)})},addFiles:A,getFile:function(T){return n.query("GET_ACTIVE_ITEM",T)},processFile:O,prepareFile:R,removeFile:y,moveFile:function(T,p){return n.dispatch("MOVE_ITEM",{query:T,index:p})},getFiles:w,processFiles:function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var N=Array.isArray(p[0])?p[0]:p;if(!N.length){var G=w().filter(function(U){return!(U.status===C.IDLE&&U.origin===te.LOCAL)&&U.status!==C.PROCESSING&&U.status!==C.PROCESSING_COMPLETE&&U.status!==C.PROCESSING_REVERT_ERROR});return Promise.all(G.map(O))}return Promise.all(N.map(O))},removeFiles:function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var G,N=Array.isArray(p[0])?p[0]:p;"object"==typeof N[N.length-1]?G=N.pop():Array.isArray(p[0])&&(G=p[1]);var U=w();return N.length?N.map(function(X){return Se(X)?U[X]?U[X].id:null:X}).filter(function(X){return X}).map(function(X){return y(X,G)}):Promise.all(U.map(function(X){return y(X,G)}))},prepareFiles:function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var N=Array.isArray(p[0])?p[0]:p,G=N.length?N:w();return Promise.all(G.map(R))},sort:function(T){return n.dispatch("SORT",{compare:T})},browse:function(){var T=d.element.querySelector("input[type=file]");T&&T.click()},destroy:function(){Y.fire("destroy",d.element),n.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",o),n.dispatch("DID_DESTROY")},insertBefore:function(T){return dr(d.element,T)},insertAfter:function(T){return pr(d.element,T)},appendTo:function(T){return T.appendChild(d.element)},replaceElement:function(T){dr(d.element,T),T.parentNode.removeChild(T),t=T},restoreElement:function(){t&&(pr(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:function(T){return d.element===T||t===T},element:{get:function(){return d.element}},status:{get:function(){return n.query("GET_STATUS")}}});return n.dispatch("DID_INIT"),me(Y)},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return k(ft(),function(n,o){t[n]=o[0]}),Hs(Object.assign({},t,{},e))},js=function i(e,t){k(t,function(r,n){k(e,function(o,a){var s=new RegExp(r);if(s.test(o)&&(delete e[o],!1!==n)){if(se(n))return void(e[n]=a);var l=n.group;re(n)&&!e[l]&&(e[l]={}),e[l][function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(o.replace(s,""))]=a}}),n.mapping&&i(e[n.group],n.mapping)})},ks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];k(e.attributes,function(o){r.push(e.attributes[o])});var n=r.filter(function(o){return o.name}).reduce(function(o,a){var s=K(e,a.name);return o[function(e){return Mn(e.replace(/^data-/,""))}(a.name)]=s===a.name||s,o},{});return js(n,t),n},Xs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Pe("SET_ATTRIBUTE_TO_OPTION_MAP",r);var n=Object.assign({},t),o=ks("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(o).forEach(function(s){re(o[s])?(re(n[s])||(n[s]={}),Object.assign(n[s],o[s])):n[s]=o[s]}),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(function(s){return{source:s.value,options:{type:s.dataset.type}}}));var a=Bn(n);return e.files&&Array.from(e.files).forEach(function(s){a.addFile(s)}),a.replaceElement(e),a},$s=function(){return function(e){return e instanceof HTMLElement}(arguments.length<=0?void 0:arguments[0])?Xs.apply(void 0,arguments):Bn.apply(void 0,arguments)},Qs=["fire","_read","_write"],Un=function(e){var t={};return Cr(e,t,Qs),t},Ks=function(e,t){return e.replace(/(?:{([a-zA-Z]+)})/g,function(r,n){return t[n]})},Zs=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:function(a,s){},post:function(a,s,u){var l=Pt();n.onmessage=function(c){c.data.id===l&&s(c.data.message)},n.postMessage({id:l,message:a},u)},terminate:function(){n.terminate(),URL.revokeObjectURL(r)}}},Js=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=function(o){r(o)},n.src=e})},Vn=function(e,t){var r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},eu=function(e){return Vn(e,e.name)},xn=[],tu=function(e){xn.includes(e)||(xn.push(e),function(e){Object.assign(Ue,e)}(e({addFilter:Ki,utils:{Type:g,forin:k,isString:se,isFile:Me,toNaturalFileSize:Jr,replaceInString:Ks,getExtensionFromFilename:pt,getFilenameWithoutExtension:Wr,guesstimateMimeType:On,getFileFromBlob:xe,getFilenameFromURL:Xe,createRoute:ae,createWorker:Zs,createView:ee,createItemAPI:ue,loadImage:Js,copyFile:eu,renameFile:Vn,createBlob:xr,applyFilterChain:ve,text:J,getNumericAspectRatioFromString:Gr},views:{fileActionButton:Zr}}).options))},ar=(i=De()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent)),function(){return i}),Oe={apps:[]},Ne=function(){};if(B.Status={},B.FileStatus={},B.FileOrigin={},B.OptionTypes={},B.create=Ne,B.destroy=Ne,B.parse=Ne,B.find=Ne,B.registerPlugin=Ne,B.getOptions=Ne,B.setOptions=Ne,ar()){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,n="__framePainter";if(window[n])return window[n].readers.push(e),void window[n].writers.push(t);window[n]={readers:[e],writers:[t]};var o=window[n],a=1e3/r,s=null,u=null,l=null,c=null,f=function(){document.hidden?(l=function(){return window.setTimeout(function(){return d(performance.now())},a)},c=function(){return window.clearTimeout(u)}):(l=function(){return window.requestAnimationFrame(d)},c=function(){return window.cancelAnimationFrame(u)})};document.addEventListener("visibilitychange",function(){c&&c(),f(),d(performance.now())});var d=function E(m){u=l(E),s||(s=m);var I=m-s;I<=a||(s=m-I%a,o.readers.forEach(function(v){return v()}),o.writers.forEach(function(v){return v(m)}))};f(),d(performance.now())}(function(){Oe.apps.forEach(function(i){return i._read()})},function(i){Oe.apps.forEach(function(e){return e._write(i)})});var qn=function i(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:ar,create:B.create,destroy:B.destroy,parse:B.parse,find:B.find,registerPlugin:B.registerPlugin,setOptions:B.setOptions}})),document.removeEventListener("DOMContentLoaded",i)};"loading"!==document.readyState?setTimeout(function(){return qn()},0):document.addEventListener("DOMContentLoaded",qn);var Yn=function(){return k(ft(),function(e,t){B.OptionTypes[e]=t[1]})};B.Status=Object.assign({},Ve),B.FileOrigin=Object.assign({},te),B.FileStatus=Object.assign({},C),B.OptionTypes={},Yn(),B.create=function(){var e=$s.apply(void 0,arguments);return e.on("destroy",B.destroy),Oe.apps.push(e),Un(e)},B.destroy=function(e){var t=Oe.apps.findIndex(function(n){return n.isAttachedTo(e)});return t>=0&&(Oe.apps.splice(t,1)[0].restoreElement(),!0)},B.parse=function(e){return Array.from(e.querySelectorAll(".filepond")).filter(function(n){return!Oe.apps.find(function(o){return o.isAttachedTo(n)})}).map(function(n){return B.create(n)})},B.find=function(e){var t=Oe.apps.find(function(r){return r.isAttachedTo(e)});return t?Un(t):null},B.registerPlugin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(tu),Yn()},B.getOptions=function(){var e={};return k(ft(),function(t,r){e[t]=r[0]}),e},B.setOptions=function(e){return re(e)&&(Oe.apps.forEach(function(t){t.setOptions(e)}),function(e){k(e,function(t,r){Ue[t]&&(Ue[t][0]=_r(r,Ue[t][0],Ue[t][1]))})}(e)),B.getOptions()}}B.supported=ar,Object.defineProperty(B,"__esModule",{value:!0})}(Ot)},9232:(Xn,Ot,B)=>{"use strict";B.d(Ot,{Ti:()=>Dt,s5:()=>tt});var x=B(4438),Je=B(9329),yt=B(177);const k=(0,Je.supported)(),me=["id","name","class","multiple","required","disabled","capture","accept"],K=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],et=["oninit","onwarning","onerror","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onactivatefile","onreorderfiles"];let Dt=(()=>{class ne{constructor($,Ie){this.options={},this.oninit=new x.bkB,this.onwarning=new x.bkB,this.onerror=new x.bkB,this.oninitfile=new x.bkB,this.onactivatefile=new x.bkB,this.onaddfilestart=new x.bkB,this.onaddfileprogress=new x.bkB,this.onaddfile=new x.bkB,this.onprocessfilestart=new x.bkB,this.onprocessfileprogress=new x.bkB,this.onprocessfileabort=new x.bkB,this.onprocessfilerevert=new x.bkB,this.onprocessfile=new x.bkB,this.onprocessfiles=new x.bkB,this.onremovefile=new x.bkB,this.onpreparefile=new x.bkB,this.onupdatefiles=new x.bkB,this.onreorderfiles=new x.bkB,this.pond=null,this.handleEvent=null,this.root=$,this.zone=Ie}ngAfterViewInit(){const $=this.root.nativeElement.querySelector("input"),Ie=this.root.nativeElement.attributes;me.forEach(ie=>{const De=Ie[ie]?Ie[ie].value:this.options[ie];De&&$.setAttribute(ie,De)}),k&&(this.handleEvent=ie=>{this[`on${ie.type.split(":")[1]}`].emit({...ie.detail})},et.forEach(ie=>{this.root.nativeElement.addEventListener(`FilePond:${ie.substring(2)}`,this.handleEvent)}),this.zone.runOutsideAngular(()=>{this.pond=(0,Je.create)($,{...this.options,files:this.files})}),this.pond&&Object.keys(this.pond).filter(ie=>-1===K.indexOf(ie)).forEach(ie=>{this[ie]=this.pond[ie]}))}ngOnChanges($){if($.firstChange||!this.pond)return;const Ie=$.options?$.options.currentValue:this.options;$.files&&JSON.stringify($.files.previousValue)!==JSON.stringify($.files.currentValue)&&(Ie.files=$.files.currentValue),this.pond.setOptions(Ie)}ngOnDestroy(){this.pond&&(et.forEach($=>{this.root.nativeElement.removeEventListener(`FilePond:${$.substring(2)}`,this.handleEvent)}),this.pond.destroy())}}return ne.\u0275fac=function($){return new($||ne)(x.rXU(x.aKT),x.rXU(x.SKi))},ne.\u0275cmp=x.VBU({type:ne,selectors:[["file-pond"]],inputs:{options:"options",files:"files"},outputs:{oninit:"oninit",onwarning:"onwarning",onerror:"onerror",oninitfile:"oninitfile",onactivatefile:"onactivatefile",onaddfilestart:"onaddfilestart",onaddfileprogress:"onaddfileprogress",onaddfile:"onaddfile",onprocessfilestart:"onprocessfilestart",onprocessfileprogress:"onprocessfileprogress",onprocessfileabort:"onprocessfileabort",onprocessfilerevert:"onprocessfilerevert",onprocessfile:"onprocessfile",onprocessfiles:"onprocessfiles",onremovefile:"onremovefile",onpreparefile:"onpreparefile",onupdatefiles:"onupdatefiles",onreorderfiles:"onreorderfiles"},features:[x.OA$],decls:2,vars:0,consts:[[1,"filepond--wrapper"],["type","file"]],template:function($,Ie){1&$&&(x.j41(0,"div",0),x.nrm(1,"input",1),x.k0s())},encapsulation:2}),ne})(),tt=(()=>{class ne{}return ne.\u0275fac=function($){return new($||ne)},ne.\u0275mod=x.$C({type:ne}),ne.\u0275inj=x.G2t({imports:[yt.MD]}),ne})()}}]);